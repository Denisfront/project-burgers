"use strict";

var acco = document.getElementsByClassName('accordeon__item');
var content = document.getElementsByClassName('accordeon-content');

var _loop = function _loop(index) {
  var element = acco[index];
  element.addEventListener('click', function (e) {
    e.preventDefault();

    for (var i = 0; i < acco.length; i++) {
      if (i !== index) {
        acco[i].classList.remove('accordeon-content--color--positoin--overflow');
      }
    }

    if (element.classList.contains('accordeon-content--color--positoin--overflow')) {
      element.classList.remove('accordeon-content--color--positoin--overflow');
    } else {
      element.classList.add('accordeon-content--color--positoin--overflow');
    }
  });
};

for (var index = 0; index < acco.length; index++) {
  _loop(index);
}

; // Доступ к инпуту с номером телефона

var form__inputjs = document.querySelector('.form__inputjs');
form__inputjs.addEventListener('keydown', function (e) {
  var isDigit = false;
  var isDash = false;
  var isControl = false;

  if (event.key >= 0 || event.ket <= 9) {
    isDigit = true;
  }

  if (event.key == '-') {
    isDash = true;
  }

  if (event.key == 'ArrowLeft' || event.key == 'ArrowRight' || event.key == 'ArrowUp' || event.key == 'ArrowDown' || event.key == 'Backspace' || event.key == 'Tab') {
    isControl = true;
  }

  if (!isDigit && !isDash && !isControl) {
    e.preventDefault();
  } // console.log(event);

});
var Myform = document.querySelector('.form'); // Доступ к тегу форм

var form = new FormData();
var btnform = document.querySelector('#btn-form'); // Доступ к кнопке

var overlayform = document.querySelector('.overlay-form');
var overlaycontent = document.querySelector('.overlay-form__conent');
var overlayformclouse = document.querySelector('.overlay-form__clouse');
btnform.addEventListener('click', function (e) {
  // Запрещаем перезагрузку сраницы при нажатии на кнопку
  e.preventDefault();

  if (validateForm(Myform)) {
    var processReqChange = function processReqChange() {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          var message = JSON.parse(xhr.response);
          console.log(message);
        } else {// ошибка
        }
      }
    };

    var data = {
      name: Myform.elements.name.value,
      phone: Myform.elements.phone.value,
      street: Myform.elements.street.value,
      comment: 'commetn',
      house: Myform.elements.house.value,
      apartament: Myform.elements.apartament.value,
      floor: Myform.elements.floor.value,
      to: 'kaktus.Zzzz@mail.ru'
    };

    for (var key in data) {
      form.append(key, data[key]);
    }

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = processReqChange;
    xhr.open('POST', "https://webdev-api.loftschool.com/sendmail");
    xhr.send(form);
    xhr.addEventListener('load', function () {
      overlayform.style.display = 'flex';

      if (xhr.status === 200) {
        overlaycontent.innerText = 'Сообщение отправильно';
      } else {
        overlaycontent.innerText = 'Отправить письмо не удалось, повторите запрос позже';
      }

      overlayformclouse.addEventListener('click', function (e) {
        e.preventDefault();
        overlayform.style.display = 'none';
        body.classList.remove('body_closed');
        Myform.reset();
      });
      body.classList.add('body_closed');
      overlayform.addEventListener('click', function (e) {
        if (e.target === overlayform) {
          overlayform.style.display = 'none';
          body.classList.remove('body_closed');
          Myform.reset();
        }
      });
    });
  }
});

function validateForm(form) {
  var valid = true;

  if (!validateField(form.elements.name)) {
    valid = false;
  }

  if (!validateField(form.elements.phone)) {
    valid = false;
  }

  if (!validateField(form.elements.street)) {
    valid = false;
  }

  if (!validateField(form.elements.house)) {
    valid = false;
  }

  if (!validateField(form.elements.apartament)) {
    valid = false;
  }

  if (!validateField(form.elements.floor)) {
    valid = false;
  }

  return valid;
}

function validateField(field) {
  field.nextElementSibling.textContent = field.validationMessage;
  return field.checkValidity();
}

;
var item = document.getElementsByClassName('accordeon-menu__item');

var _loop2 = function _loop2(_index) {
  var element = item[_index];
  element.addEventListener('click', function (e) {
    e.preventDefault();

    for (var i = 0; i < item.length; i++) {
      if (i !== _index) {
        item[i].classList.remove('accordeon-menu__content--active--color');
      }
    }

    if (element.classList.contains('accordeon-menu__content--active--color')) {
      element.classList.remove('accordeon-menu__content--active--color');
    } else {
      element.classList.add('accordeon-menu__content--active--color');
    }
  });
};

for (var _index = 0; _index < item.length; _index++) {
  _loop2(_index);
}

;
var hamburger = document.querySelector('#hamburger');
var arrowscroww = document.querySelector('#arrowscroll');
var computed = getComputedStyle(navtablets);
var computedscroll = getComputedStyle(arrowscroll);
var body = document.querySelector('body');
hamburger.addEventListener('click', function (e) {
  e.preventDefault(); // console.log(computed.display);

  var displaynone = computed.display;
  var arrowscrollblock = computedscroll.display;

  if (displaynone == 'none') {
    navtablets.style.display = 'flex';
    body.classList.add('body_closed');
  } else {
    navtablets.style.display = 'none';
    body.classList.remove('body_closed');
  }

  if (arrowscrollblock == 'block') {
    arrowscroll.style.display = 'none';
  } else {
    arrowscroll.style.display = 'block';
  }
});
;
var sections = $('.section');
var display = $('.maincontent');
var inScroll = false;

var performTransition = function performTransition(sectionEq) {
  if (inScroll === false) {
    inScroll = true;
    var position = sectionEq * -100;
    sections.eq(sectionEq).addClass('active').siblings().removeClass('active');
    display.css({
      transform: "translateY(".concat(position, "%)")
    });
    setTimeout(function () {
      inScroll = false;
      $('.column__item').eq(sectionEq).addClass('column__dot--active').siblings().removeClass('column__dot--active');
    }, 1300);
  }
};

var scrollToSection = function scrollToSection(direction) {
  var activeSection = sections.filter('.active');
  var nextSection = activeSection.next();
  var prevSection = activeSection.prev();

  if (direction === 'next' && nextSection.length) {
    performTransition(nextSection.index());
  }

  if (direction === 'prev' && prevSection.length) {
    performTransition(prevSection.index());
  }
};

$(window).on('wheel', function (e) {
  var deltaY = e.originalEvent.deltaY;

  if (deltaY > 0) {
    scrollToSection('next');
  }

  if (deltaY < 0) {
    scrollToSection('prev');
  }
});
$(window).on('keydown', function (e) {
  var tagName = e.target.tagName.toLowerCase();

  if (tagName != 'input' && tagName != 'textarea') {
    switch (e.keyCode) {
      case 38:
        scrollToSection('prev');
        break;

      case 40:
        scrollToSection('next');
        break;
    }
  }

  ;
});
$('[data-scroll-to]').on('click', function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-scroll-to');
  performTransition(target);
});
$("body").swipe({
  swipe: function swipe(event, direction, distance, duration, fingerCount, fingerData) {
    var scrollDirection = direction === 'up' ? 'next' : 'prev';
    scrollToSection(scrollDirection);
  }
});
;
var buttonOpen = document.querySelector('#buttonOpen');
var body1 = document.querySelector('body');
var reviews = document.querySelector('#reviewsjs');
var openOverlay = reviewOverlay('Константин Спилберг', 'Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.');
$('.buttonOpen').on('click', function () {
  reviews.appendChild(openOverlay);
  body1.classList.add('body_closed');
});

function reviewOverlay(username, content) {
  var overlayElement = document.createElement('div');
  overlayElement.classList.add('overlay');
  overlayElement.addEventListener('click', function (e) {
    if (e.target === overlayElement) {
      closeElement.click();
    }
  });
  var conainerElement = document.createElement('div');
  conainerElement.classList.add('overlay__container');
  var usermaeElement = document.createElement('div');
  usermaeElement.classList.add('overlay__username');
  usermaeElement.innerHTML = username;
  var contentElement = document.createElement('div');
  contentElement.classList.add('overlay-content');
  contentElement.innerHTML = content;
  var closeElement = document.createElement('a');
  closeElement.classList.add('close');
  closeElement.href = "#";
  closeElement.addEventListener('click', function (e) {
    e.preventDefault();
    reviews.removeChild(openOverlay);
    body1.classList.remove('body_closed');
  });
  overlayElement.appendChild(conainerElement);
  conainerElement.appendChild(usermaeElement);
  conainerElement.appendChild(contentElement);
  conainerElement.appendChild(closeElement);
  return overlayElement;
}

; // const leftbutton = document.querySelector('.button-prev');
// const rightbutton = document.querySelector('.button-next');
// const itemlist = document.querySelector('.menu-slider__list');
// rightbutton.addEventListener('click', function (e) {
//     loop('rightbutton', e);
// });
// leftbutton.addEventListener('click', function (e) {
//     loop('leftbutton', e);
// });
// function loop(direction, e) {
//     e.preventDefault();
//     if (direction == rightbutton) {
//         itemlist.appendChild(itemlist.firstElementChild);
//     } else {
//         itemlist.insertBefore(itemlist.lastElementChild, itemlist.firstElementChild);
//     }
// }

$(function () {
  var moveSlide = function moveSlide(item, slideNum) {
    var activeSlide = item.filter('.active'),
        reqItem = item.eq(slideNum),
        reqIndex = reqItem.index(),
        duration = 500;

    if (reqItem.length) {
      item.animate({
        'left': -reqIndex * 100 + '%'
      }, duration, function () {
        activeSlide.removeClass('active');
        reqItem.addClass('active');
      });
    }
  };

  $('.button-slider').on('click', function (e) {
    e.preventDefault();
    var item = $('.menu-slider__content'),
        activeItem = item.filter('.active'),
        existedItem,
        edgeItem,
        reqItem;

    if ($(this).hasClass('button-next')) {
      // вперёд
      existedItem = activeItem.next();
      edgeItem = item.first();
    }

    if ($(this).hasClass('button-prev')) {
      // назад
      existedItem = activeItem.prev();
      edgeItem = item.last();
    }

    reqItem = existedItem.length ? existedItem.index() : edgeItem.index();
    moveSlide(item, reqItem);

    if (existedItem.length) {
      moveSlide(item, existedItem);
    } else {
      moveSlide(item, edgeItem);
    }
  });
});
;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY28tdGVhbS5qcyIsImZvcm0uanMiLCJtZW51LWFjY29yZGVvbi5qcyIsIm5hdi5qcyIsIm9uZS1wYWdlLXNjcm9sbC5qcyIsInJldmlld3MuanMiLCJzbGlkZXIuanMiXSwibmFtZXMiOlsiYWNjbyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNvbnRlbnQiLCJpbmRleCIsImVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwiaSIsImxlbmd0aCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImNvbnRhaW5zIiwiYWRkIiwiZm9ybV9faW5wdXRqcyIsInF1ZXJ5U2VsZWN0b3IiLCJpc0RpZ2l0IiwiaXNEYXNoIiwiaXNDb250cm9sIiwiZXZlbnQiLCJrZXkiLCJrZXQiLCJNeWZvcm0iLCJmb3JtIiwiRm9ybURhdGEiLCJidG5mb3JtIiwib3ZlcmxheWZvcm0iLCJvdmVybGF5Y29udGVudCIsIm92ZXJsYXlmb3JtY2xvdXNlIiwidmFsaWRhdGVGb3JtIiwicHJvY2Vzc1JlcUNoYW5nZSIsInhociIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJtZXNzYWdlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2UiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsIm5hbWUiLCJlbGVtZW50cyIsInZhbHVlIiwicGhvbmUiLCJzdHJlZXQiLCJjb21tZW50IiwiaG91c2UiLCJhcGFydGFtZW50IiwiZmxvb3IiLCJ0byIsImFwcGVuZCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwib3BlbiIsInNlbmQiLCJzdHlsZSIsImRpc3BsYXkiLCJpbm5lclRleHQiLCJib2R5IiwicmVzZXQiLCJ0YXJnZXQiLCJ2YWxpZCIsInZhbGlkYXRlRmllbGQiLCJmaWVsZCIsIm5leHRFbGVtZW50U2libGluZyIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja1ZhbGlkaXR5IiwiaXRlbSIsImhhbWJ1cmdlciIsImFycm93c2Nyb3d3IiwiY29tcHV0ZWQiLCJnZXRDb21wdXRlZFN0eWxlIiwibmF2dGFibGV0cyIsImNvbXB1dGVkc2Nyb2xsIiwiYXJyb3dzY3JvbGwiLCJkaXNwbGF5bm9uZSIsImFycm93c2Nyb2xsYmxvY2siLCJzZWN0aW9ucyIsIiQiLCJpblNjcm9sbCIsInBlcmZvcm1UcmFuc2l0aW9uIiwic2VjdGlvbkVxIiwicG9zaXRpb24iLCJlcSIsImFkZENsYXNzIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsImNzcyIsInRyYW5zZm9ybSIsInNldFRpbWVvdXQiLCJzY3JvbGxUb1NlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmVTZWN0aW9uIiwiZmlsdGVyIiwibmV4dFNlY3Rpb24iLCJuZXh0IiwicHJldlNlY3Rpb24iLCJwcmV2Iiwid2luZG93Iiwib24iLCJkZWx0YVkiLCJvcmlnaW5hbEV2ZW50IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwia2V5Q29kZSIsIiR0aGlzIiwiY3VycmVudFRhcmdldCIsImF0dHIiLCJzd2lwZSIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJmaW5nZXJDb3VudCIsImZpbmdlckRhdGEiLCJzY3JvbGxEaXJlY3Rpb24iLCJidXR0b25PcGVuIiwiYm9keTEiLCJyZXZpZXdzIiwib3Blbk92ZXJsYXkiLCJyZXZpZXdPdmVybGF5IiwiYXBwZW5kQ2hpbGQiLCJ1c2VybmFtZSIsIm92ZXJsYXlFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsb3NlRWxlbWVudCIsImNsaWNrIiwiY29uYWluZXJFbGVtZW50IiwidXNlcm1hZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjb250ZW50RWxlbWVudCIsImhyZWYiLCJyZW1vdmVDaGlsZCIsIm1vdmVTbGlkZSIsInNsaWRlTnVtIiwiYWN0aXZlU2xpZGUiLCJyZXFJdGVtIiwicmVxSW5kZXgiLCJhbmltYXRlIiwiYWN0aXZlSXRlbSIsImV4aXN0ZWRJdGVtIiwiZWRnZUl0ZW0iLCJoYXNDbGFzcyIsImZpcnN0IiwibGFzdCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxJQUFBLEdBQUFDLFFBQUEsQ0FBQUMsc0JBQUEsQ0FBQSxpQkFBQSxDQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixRQUFBLENBQUFDLHNCQUFBLENBQUEsbUJBQUEsQ0FBQTs7MkJBRUFFLEs7QUFDQSxNQUFBQyxPQUFBLEdBQUFMLElBQUEsQ0FBQUksS0FBQSxDQUFBO0FBQ0FDLEVBQUFBLE9BQUEsQ0FBQUMsZ0JBQUEsQ0FBQSxPQUFBLEVBQUEsVUFBQUMsQ0FBQSxFQUFBO0FBQ0FBLElBQUFBLENBQUEsQ0FBQUMsY0FBQTs7QUFDQSxTQUFBLElBQUFDLENBQUEsR0FBQSxDQUFBLEVBQUFBLENBQUEsR0FBQVQsSUFBQSxDQUFBVSxNQUFBLEVBQUFELENBQUEsRUFBQSxFQUFBO0FBQ0EsVUFBQUEsQ0FBQSxLQUFBTCxLQUFBLEVBQUE7QUFDQUosUUFBQUEsSUFBQSxDQUFBUyxDQUFBLENBQUEsQ0FBQUUsU0FBQSxDQUFBQyxNQUFBLENBQUEsOENBQUE7QUFDQTtBQUNBOztBQUVBLFFBQUFQLE9BQUEsQ0FBQU0sU0FBQSxDQUFBRSxRQUFBLENBQUEsOENBQUEsQ0FBQSxFQUFBO0FBQ0FSLE1BQUFBLE9BQUEsQ0FBQU0sU0FBQSxDQUFBQyxNQUFBLENBQUEsOENBQUE7QUFDQSxLQUZBLE1BRUE7QUFDQVAsTUFBQUEsT0FBQSxDQUFBTSxTQUFBLENBQUFHLEdBQUEsQ0FBQSw4Q0FBQTtBQUNBO0FBQ0EsR0FiQTs7O0FBRkEsS0FBQSxJQUFBVixLQUFBLEdBQUEsQ0FBQSxFQUFBQSxLQUFBLEdBQUFKLElBQUEsQ0FBQVUsTUFBQSxFQUFBTixLQUFBLEVBQUEsRUFBQTtBQUFBLFFBQUFBLEtBQUE7QUFnQkE7O0FBQUEsQyxDQ25CQTs7QUFDQSxJQUFBVyxhQUFBLEdBQUFkLFFBQUEsQ0FBQWUsYUFBQSxDQUFBLGdCQUFBLENBQUE7QUFFQUQsYUFBQSxDQUFBVCxnQkFBQSxDQUFBLFNBQUEsRUFBQSxVQUFBQyxDQUFBLEVBQUE7QUFDQSxNQUFBVSxPQUFBLEdBQUEsS0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQSxLQUFBO0FBQ0EsTUFBQUMsU0FBQSxHQUFBLEtBQUE7O0FBRUEsTUFBQUMsS0FBQSxDQUFBQyxHQUFBLElBQUEsQ0FBQSxJQUFBRCxLQUFBLENBQUFFLEdBQUEsSUFBQSxDQUFBLEVBQUE7QUFDQUwsSUFBQUEsT0FBQSxHQUFBLElBQUE7QUFDQTs7QUFFQSxNQUFBRyxLQUFBLENBQUFDLEdBQUEsSUFBQSxHQUFBLEVBQUE7QUFDQUgsSUFBQUEsTUFBQSxHQUFBLElBQUE7QUFDQTs7QUFFQSxNQUFBRSxLQUFBLENBQUFDLEdBQUEsSUFBQSxXQUFBLElBQUFELEtBQUEsQ0FBQUMsR0FBQSxJQUFBLFlBQUEsSUFBQUQsS0FBQSxDQUFBQyxHQUFBLElBQUEsU0FBQSxJQUFBRCxLQUFBLENBQUFDLEdBQUEsSUFBQSxXQUFBLElBQUFELEtBQUEsQ0FBQUMsR0FBQSxJQUFBLFdBQUEsSUFBQUQsS0FBQSxDQUFBQyxHQUFBLElBQUEsS0FBQSxFQUFBO0FBQ0FGLElBQUFBLFNBQUEsR0FBQSxJQUFBO0FBQ0E7O0FBQ0EsTUFBQSxDQUFBRixPQUFBLElBQUEsQ0FBQUMsTUFBQSxJQUFBLENBQUFDLFNBQUEsRUFBQTtBQUNBWixJQUFBQSxDQUFBLENBQUFDLGNBQUE7QUFDQSxHQWxCQSxDQW1CQTs7QUFDQSxDQXBCQTtBQXVCQSxJQUFBZSxNQUFBLEdBQUF0QixRQUFBLENBQUFlLGFBQUEsQ0FBQSxPQUFBLENBQUEsQyxDQUFBOztBQUNBLElBQUFRLElBQUEsR0FBQSxJQUFBQyxRQUFBLEVBQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUF6QixRQUFBLENBQUFlLGFBQUEsQ0FBQSxXQUFBLENBQUEsQyxDQUFBOztBQUNBLElBQUFXLFdBQUEsR0FBQTFCLFFBQUEsQ0FBQWUsYUFBQSxDQUFBLGVBQUEsQ0FBQTtBQUNBLElBQUFZLGNBQUEsR0FBQTNCLFFBQUEsQ0FBQWUsYUFBQSxDQUFBLHVCQUFBLENBQUE7QUFDQSxJQUFBYSxpQkFBQSxHQUFBNUIsUUFBQSxDQUFBZSxhQUFBLENBQUEsdUJBQUEsQ0FBQTtBQUNBVSxPQUFBLENBQUFwQixnQkFBQSxDQUFBLE9BQUEsRUFBQSxVQUFBQyxDQUFBLEVBQUE7QUFBQTtBQUNBQSxFQUFBQSxDQUFBLENBQUFDLGNBQUE7O0FBRUEsTUFBQXNCLFlBQUEsQ0FBQVAsTUFBQSxDQUFBLEVBQUE7QUFBQSxRQWlCQVEsZ0JBakJBLEdBaUJBLFNBQUFBLGdCQUFBLEdBQUE7QUFDQSxVQUFBQyxHQUFBLENBQUFDLFVBQUEsS0FBQSxDQUFBLEVBQUE7QUFDQSxZQUFBRCxHQUFBLENBQUFFLE1BQUEsS0FBQSxHQUFBLEVBQUE7QUFDQSxjQUFBQyxPQUFBLEdBQUFDLElBQUEsQ0FBQUMsS0FBQSxDQUFBTCxHQUFBLENBQUFNLFFBQUEsQ0FBQTtBQUNBQyxVQUFBQSxPQUFBLENBQUFDLEdBQUEsQ0FBQUwsT0FBQTtBQUNBLFNBSEEsTUFHQSxDQUNBO0FBQ0E7QUFDQTtBQUNBLEtBMUJBOztBQUNBLFFBQUFNLElBQUEsR0FBQTtBQUNBQyxNQUFBQSxJQUFBLEVBQUFuQixNQUFBLENBQUFvQixRQUFBLENBQUFELElBQUEsQ0FBQUUsS0FEQTtBQUVBQyxNQUFBQSxLQUFBLEVBQUF0QixNQUFBLENBQUFvQixRQUFBLENBQUFFLEtBQUEsQ0FBQUQsS0FGQTtBQUdBRSxNQUFBQSxNQUFBLEVBQUF2QixNQUFBLENBQUFvQixRQUFBLENBQUFHLE1BQUEsQ0FBQUYsS0FIQTtBQUlBRyxNQUFBQSxPQUFBLEVBQUEsU0FKQTtBQUtBQyxNQUFBQSxLQUFBLEVBQUF6QixNQUFBLENBQUFvQixRQUFBLENBQUFLLEtBQUEsQ0FBQUosS0FMQTtBQU1BSyxNQUFBQSxVQUFBLEVBQUExQixNQUFBLENBQUFvQixRQUFBLENBQUFNLFVBQUEsQ0FBQUwsS0FOQTtBQU9BTSxNQUFBQSxLQUFBLEVBQUEzQixNQUFBLENBQUFvQixRQUFBLENBQUFPLEtBQUEsQ0FBQU4sS0FQQTtBQVFBTyxNQUFBQSxFQUFBLEVBQUE7QUFSQSxLQUFBOztBQVVBLFNBQUEsSUFBQTlCLEdBQUEsSUFBQW9CLElBQUEsRUFBQTtBQUNBakIsTUFBQUEsSUFBQSxDQUFBNEIsTUFBQSxDQUFBL0IsR0FBQSxFQUFBb0IsSUFBQSxDQUFBcEIsR0FBQSxDQUFBO0FBQ0E7O0FBQ0EsUUFBQVcsR0FBQSxHQUFBLElBQUFxQixjQUFBLEVBQUE7QUFDQXJCLElBQUFBLEdBQUEsQ0FBQXNCLGtCQUFBLEdBQUF2QixnQkFBQTtBQVlBQyxJQUFBQSxHQUFBLENBQUF1QixJQUFBLENBQUEsTUFBQSxFQUFBLDRDQUFBO0FBQ0F2QixJQUFBQSxHQUFBLENBQUF3QixJQUFBLENBQUFoQyxJQUFBO0FBQ0FRLElBQUFBLEdBQUEsQ0FBQTFCLGdCQUFBLENBQUEsTUFBQSxFQUFBLFlBQUE7QUFDQXFCLE1BQUFBLFdBQUEsQ0FBQThCLEtBQUEsQ0FBQUMsT0FBQSxHQUFBLE1BQUE7O0FBQ0EsVUFBQTFCLEdBQUEsQ0FBQUUsTUFBQSxLQUFBLEdBQUEsRUFBQTtBQUNBTixRQUFBQSxjQUFBLENBQUErQixTQUFBLEdBQUEsdUJBQUE7QUFDQSxPQUZBLE1BRUE7QUFDQS9CLFFBQUFBLGNBQUEsQ0FBQStCLFNBQUEsR0FBQSxxREFBQTtBQUNBOztBQUVBOUIsTUFBQUEsaUJBQUEsQ0FBQXZCLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUFDLENBQUEsRUFBQTtBQUNBQSxRQUFBQSxDQUFBLENBQUFDLGNBQUE7QUFDQW1CLFFBQUFBLFdBQUEsQ0FBQThCLEtBQUEsQ0FBQUMsT0FBQSxHQUFBLE1BQUE7QUFDQUUsUUFBQUEsSUFBQSxDQUFBakQsU0FBQSxDQUFBQyxNQUFBLENBQUEsYUFBQTtBQUNBVyxRQUFBQSxNQUFBLENBQUFzQyxLQUFBO0FBQ0EsT0FMQTtBQU9BRCxNQUFBQSxJQUFBLENBQUFqRCxTQUFBLENBQUFHLEdBQUEsQ0FBQSxhQUFBO0FBQ0FhLE1BQUFBLFdBQUEsQ0FBQXJCLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUFDLENBQUEsRUFBQTtBQUVBLFlBQUFBLENBQUEsQ0FBQXVELE1BQUEsS0FBQW5DLFdBQUEsRUFBQTtBQUNBQSxVQUFBQSxXQUFBLENBQUE4QixLQUFBLENBQUFDLE9BQUEsR0FBQSxNQUFBO0FBQ0FFLFVBQUFBLElBQUEsQ0FBQWpELFNBQUEsQ0FBQUMsTUFBQSxDQUFBLGFBQUE7QUFDQVcsVUFBQUEsTUFBQSxDQUFBc0MsS0FBQTtBQUNBO0FBQ0EsT0FQQTtBQVFBLEtBeEJBO0FBeUJBO0FBRUEsQ0EzREE7O0FBNkRBLFNBQUEvQixZQUFBLENBQUFOLElBQUEsRUFBQTtBQUNBLE1BQUF1QyxLQUFBLEdBQUEsSUFBQTs7QUFFQSxNQUFBLENBQUFDLGFBQUEsQ0FBQXhDLElBQUEsQ0FBQW1CLFFBQUEsQ0FBQUQsSUFBQSxDQUFBLEVBQUE7QUFDQXFCLElBQUFBLEtBQUEsR0FBQSxLQUFBO0FBQ0E7O0FBRUEsTUFBQSxDQUFBQyxhQUFBLENBQUF4QyxJQUFBLENBQUFtQixRQUFBLENBQUFFLEtBQUEsQ0FBQSxFQUFBO0FBQ0FrQixJQUFBQSxLQUFBLEdBQUEsS0FBQTtBQUNBOztBQUVBLE1BQUEsQ0FBQUMsYUFBQSxDQUFBeEMsSUFBQSxDQUFBbUIsUUFBQSxDQUFBRyxNQUFBLENBQUEsRUFBQTtBQUNBaUIsSUFBQUEsS0FBQSxHQUFBLEtBQUE7QUFDQTs7QUFFQSxNQUFBLENBQUFDLGFBQUEsQ0FBQXhDLElBQUEsQ0FBQW1CLFFBQUEsQ0FBQUssS0FBQSxDQUFBLEVBQUE7QUFDQWUsSUFBQUEsS0FBQSxHQUFBLEtBQUE7QUFDQTs7QUFFQSxNQUFBLENBQUFDLGFBQUEsQ0FBQXhDLElBQUEsQ0FBQW1CLFFBQUEsQ0FBQU0sVUFBQSxDQUFBLEVBQUE7QUFDQWMsSUFBQUEsS0FBQSxHQUFBLEtBQUE7QUFDQTs7QUFFQSxNQUFBLENBQUFDLGFBQUEsQ0FBQXhDLElBQUEsQ0FBQW1CLFFBQUEsQ0FBQU8sS0FBQSxDQUFBLEVBQUE7QUFDQWEsSUFBQUEsS0FBQSxHQUFBLEtBQUE7QUFDQTs7QUFFQSxTQUFBQSxLQUFBO0FBQ0E7O0FBRUEsU0FBQUMsYUFBQSxDQUFBQyxLQUFBLEVBQUE7QUFDQUEsRUFBQUEsS0FBQSxDQUFBQyxrQkFBQSxDQUFBQyxXQUFBLEdBQUFGLEtBQUEsQ0FBQUcsaUJBQUE7QUFDQSxTQUFBSCxLQUFBLENBQUFJLGFBQUEsRUFBQTtBQUNBOztBQUFBO0FDOUhBLElBQUFDLElBQUEsR0FBQXJFLFFBQUEsQ0FBQUMsc0JBQUEsQ0FBQSxzQkFBQSxDQUFBOzs2QkFFQUUsTTtBQUNBLE1BQUFDLE9BQUEsR0FBQWlFLElBQUEsQ0FBQWxFLE1BQUEsQ0FBQTtBQUNBQyxFQUFBQSxPQUFBLENBQUFDLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUFDLENBQUEsRUFBQTtBQUNBQSxJQUFBQSxDQUFBLENBQUFDLGNBQUE7O0FBQ0EsU0FBQSxJQUFBQyxDQUFBLEdBQUEsQ0FBQSxFQUFBQSxDQUFBLEdBQUE2RCxJQUFBLENBQUE1RCxNQUFBLEVBQUFELENBQUEsRUFBQSxFQUFBO0FBQ0EsVUFBQUEsQ0FBQSxLQUFBTCxNQUFBLEVBQUE7QUFDQWtFLFFBQUFBLElBQUEsQ0FBQTdELENBQUEsQ0FBQSxDQUFBRSxTQUFBLENBQUFDLE1BQUEsQ0FBQSx3Q0FBQTtBQUNBO0FBQ0E7O0FBRUEsUUFBQVAsT0FBQSxDQUFBTSxTQUFBLENBQUFFLFFBQUEsQ0FBQSx3Q0FBQSxDQUFBLEVBQUE7QUFDQVIsTUFBQUEsT0FBQSxDQUFBTSxTQUFBLENBQUFDLE1BQUEsQ0FBQSx3Q0FBQTtBQUNBLEtBRkEsTUFFQTtBQUNBUCxNQUFBQSxPQUFBLENBQUFNLFNBQUEsQ0FBQUcsR0FBQSxDQUFBLHdDQUFBO0FBQ0E7QUFDQSxHQWJBOzs7QUFGQSxLQUFBLElBQUFWLE1BQUEsR0FBQSxDQUFBLEVBQUFBLE1BQUEsR0FBQWtFLElBQUEsQ0FBQTVELE1BQUEsRUFBQU4sTUFBQSxFQUFBLEVBQUE7QUFBQSxTQUFBQSxNQUFBO0FBZ0JBOztBQUNBO0FDbkJBLElBQUFtRSxTQUFBLEdBQUF0RSxRQUFBLENBQUFlLGFBQUEsQ0FBQSxZQUFBLENBQUE7QUFDQSxJQUFBd0QsV0FBQSxHQUFBdkUsUUFBQSxDQUFBZSxhQUFBLENBQUEsY0FBQSxDQUFBO0FBQ0EsSUFBQXlELFFBQUEsR0FBQUMsZ0JBQUEsQ0FBQUMsVUFBQSxDQUFBO0FBQ0EsSUFBQUMsY0FBQSxHQUFBRixnQkFBQSxDQUFBRyxXQUFBLENBQUE7QUFDQSxJQUFBakIsSUFBQSxHQUFBM0QsUUFBQSxDQUFBZSxhQUFBLENBQUEsTUFBQSxDQUFBO0FBRUF1RCxTQUFBLENBQUFqRSxnQkFBQSxDQUFBLE9BQUEsRUFBQSxVQUFBQyxDQUFBLEVBQUE7QUFDQUEsRUFBQUEsQ0FBQSxDQUFBQyxjQUFBLEdBREEsQ0FHQTs7QUFDQSxNQUFBc0UsV0FBQSxHQUFBTCxRQUFBLENBQUFmLE9BQUE7QUFDQSxNQUFBcUIsZ0JBQUEsR0FBQUgsY0FBQSxDQUFBbEIsT0FBQTs7QUFHQSxNQUFBb0IsV0FBQSxJQUFBLE1BQUEsRUFBQTtBQUNBSCxJQUFBQSxVQUFBLENBQUFsQixLQUFBLENBQUFDLE9BQUEsR0FBQSxNQUFBO0FBQ0FFLElBQUFBLElBQUEsQ0FBQWpELFNBQUEsQ0FBQUcsR0FBQSxDQUFBLGFBQUE7QUFDQSxHQUhBLE1BR0E7QUFDQTZELElBQUFBLFVBQUEsQ0FBQWxCLEtBQUEsQ0FBQUMsT0FBQSxHQUFBLE1BQUE7QUFDQUUsSUFBQUEsSUFBQSxDQUFBakQsU0FBQSxDQUFBQyxNQUFBLENBQUEsYUFBQTtBQUNBOztBQUVBLE1BQUFtRSxnQkFBQSxJQUFBLE9BQUEsRUFBQTtBQUNBRixJQUFBQSxXQUFBLENBQUFwQixLQUFBLENBQUFDLE9BQUEsR0FBQSxNQUFBO0FBQ0EsR0FGQSxNQUVBO0FBQ0FtQixJQUFBQSxXQUFBLENBQUFwQixLQUFBLENBQUFDLE9BQUEsR0FBQSxPQUFBO0FBQ0E7QUFDQSxDQXJCQTtBQXFCQTtBQzNCQSxJQUFBc0IsUUFBQSxHQUFBQyxDQUFBLENBQUEsVUFBQSxDQUFBO0FBQ0EsSUFBQXZCLE9BQUEsR0FBQXVCLENBQUEsQ0FBQSxjQUFBLENBQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUEsS0FBQTs7QUFFQSxJQUFBQyxpQkFBQSxHQUFBLFNBQUFBLGlCQUFBLENBQUFDLFNBQUEsRUFBQTtBQUNBLE1BQUFGLFFBQUEsS0FBQSxLQUFBLEVBQUE7QUFDQUEsSUFBQUEsUUFBQSxHQUFBLElBQUE7QUFDQSxRQUFBRyxRQUFBLEdBQUFELFNBQUEsR0FBQSxDQUFBLEdBQUE7QUFDQUosSUFBQUEsUUFBQSxDQUNBTSxFQURBLENBQ0FGLFNBREEsRUFFQUcsUUFGQSxDQUVBLFFBRkEsRUFHQUMsUUFIQSxHQUlBQyxXQUpBLENBSUEsUUFKQTtBQU1BL0IsSUFBQUEsT0FBQSxDQUFBZ0MsR0FBQSxDQUFBO0FBQ0FDLE1BQUFBLFNBQUEsdUJBQUFOLFFBQUE7QUFEQSxLQUFBO0FBSUFPLElBQUFBLFVBQUEsQ0FBQSxZQUFBO0FBQ0FWLE1BQUFBLFFBQUEsR0FBQSxLQUFBO0FBRUFELE1BQUFBLENBQUEsQ0FBQSxlQUFBLENBQUEsQ0FDQUssRUFEQSxDQUNBRixTQURBLEVBRUFHLFFBRkEsQ0FFQSxxQkFGQSxFQUdBQyxRQUhBLEdBSUFDLFdBSkEsQ0FJQSxxQkFKQTtBQUtBLEtBUkEsRUFRQSxJQVJBLENBQUE7QUFTQTtBQUNBLENBeEJBOztBQTBCQSxJQUFBSSxlQUFBLEdBQUEsU0FBQUEsZUFBQSxDQUFBQyxTQUFBLEVBQUE7QUFDQSxNQUFBQyxhQUFBLEdBQUFmLFFBQUEsQ0FBQWdCLE1BQUEsQ0FBQSxTQUFBLENBQUE7QUFDQSxNQUFBQyxXQUFBLEdBQUFGLGFBQUEsQ0FBQUcsSUFBQSxFQUFBO0FBQ0EsTUFBQUMsV0FBQSxHQUFBSixhQUFBLENBQUFLLElBQUEsRUFBQTs7QUFFQSxNQUFBTixTQUFBLEtBQUEsTUFBQSxJQUFBRyxXQUFBLENBQUF2RixNQUFBLEVBQUE7QUFDQXlFLElBQUFBLGlCQUFBLENBQUFjLFdBQUEsQ0FBQTdGLEtBQUEsRUFBQSxDQUFBO0FBQ0E7O0FBRUEsTUFBQTBGLFNBQUEsS0FBQSxNQUFBLElBQUFLLFdBQUEsQ0FBQXpGLE1BQUEsRUFBQTtBQUNBeUUsSUFBQUEsaUJBQUEsQ0FBQWdCLFdBQUEsQ0FBQS9GLEtBQUEsRUFBQSxDQUFBO0FBQ0E7QUFDQSxDQVpBOztBQWNBNkUsQ0FBQSxDQUFBb0IsTUFBQSxDQUFBLENBQUFDLEVBQUEsQ0FBQSxPQUFBLEVBQUEsVUFBQS9GLENBQUEsRUFBQTtBQUNBLE1BQUFnRyxNQUFBLEdBQUFoRyxDQUFBLENBQUFpRyxhQUFBLENBQUFELE1BQUE7O0FBRUEsTUFBQUEsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBVixJQUFBQSxlQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0E7O0FBRUEsTUFBQVUsTUFBQSxHQUFBLENBQUEsRUFBQTtBQUNBVixJQUFBQSxlQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0E7QUFDQSxDQVZBO0FBWUFaLENBQUEsQ0FBQW9CLE1BQUEsQ0FBQSxDQUFBQyxFQUFBLENBQUEsU0FBQSxFQUFBLFVBQUEvRixDQUFBLEVBQUE7QUFDQSxNQUFBa0csT0FBQSxHQUFBbEcsQ0FBQSxDQUFBdUQsTUFBQSxDQUFBMkMsT0FBQSxDQUFBQyxXQUFBLEVBQUE7O0FBRUEsTUFBQUQsT0FBQSxJQUFBLE9BQUEsSUFBQUEsT0FBQSxJQUFBLFVBQUEsRUFBQTtBQUNBLFlBQUFsRyxDQUFBLENBQUFvRyxPQUFBO0FBQ0EsV0FBQSxFQUFBO0FBQ0FkLFFBQUFBLGVBQUEsQ0FBQSxNQUFBLENBQUE7QUFDQTs7QUFDQSxXQUFBLEVBQUE7QUFDQUEsUUFBQUEsZUFBQSxDQUFBLE1BQUEsQ0FBQTtBQUNBO0FBTkE7QUFRQTs7QUFBQTtBQUVBLENBZEE7QUFnQkFaLENBQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUFxQixFQUFBLENBQUEsT0FBQSxFQUFBLFVBQUEvRixDQUFBLEVBQUE7QUFDQUEsRUFBQUEsQ0FBQSxDQUFBQyxjQUFBO0FBQ0EsTUFBQW9HLEtBQUEsR0FBQTNCLENBQUEsQ0FBQTFFLENBQUEsQ0FBQXNHLGFBQUEsQ0FBQTtBQUNBLE1BQUEvQyxNQUFBLEdBQUE4QyxLQUFBLENBQUFFLElBQUEsQ0FBQSxnQkFBQSxDQUFBO0FBRUEzQixFQUFBQSxpQkFBQSxDQUFBckIsTUFBQSxDQUFBO0FBQ0EsQ0FOQTtBQVFBbUIsQ0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBOEIsS0FBQSxDQUFBO0FBQ0FBLEVBQUFBLEtBQUEsRUFBQSxlQUNBM0YsS0FEQSxFQUVBMEUsU0FGQSxFQUdBa0IsUUFIQSxFQUlBQyxRQUpBLEVBS0FDLFdBTEEsRUFNQUMsVUFOQSxFQU1BO0FBQ0EsUUFBQUMsZUFBQSxHQUFBdEIsU0FBQSxLQUFBLElBQUEsR0FBQSxNQUFBLEdBQUEsTUFBQTtBQUVBRCxJQUFBQSxlQUFBLENBQUF1QixlQUFBLENBQUE7QUFDQTtBQVhBLENBQUE7QUFZQTtBQzVGQSxJQUFBQyxVQUFBLEdBQUFwSCxRQUFBLENBQUFlLGFBQUEsQ0FBQSxhQUFBLENBQUE7QUFDQSxJQUFBc0csS0FBQSxHQUFBckgsUUFBQSxDQUFBZSxhQUFBLENBQUEsTUFBQSxDQUFBO0FBQ0EsSUFBQXVHLE9BQUEsR0FBQXRILFFBQUEsQ0FBQWUsYUFBQSxDQUFBLFlBQUEsQ0FBQTtBQUNBLElBQUF3RyxXQUFBLEdBQUFDLGFBQUEsQ0FBQSxxQkFBQSxFQUFBLGlYQUFBLENBQUE7QUFFQXhDLENBQUEsQ0FBQSxhQUFBLENBQUEsQ0FBQXFCLEVBQUEsQ0FBQSxPQUFBLEVBQUEsWUFBQTtBQUNBaUIsRUFBQUEsT0FBQSxDQUFBRyxXQUFBLENBQUFGLFdBQUE7QUFDQUYsRUFBQUEsS0FBQSxDQUFBM0csU0FBQSxDQUFBRyxHQUFBLENBQUEsYUFBQTtBQUNBLENBSEE7O0FBS0EsU0FBQTJHLGFBQUEsQ0FBQUUsUUFBQSxFQUFBeEgsT0FBQSxFQUFBO0FBQ0EsTUFBQXlILGNBQUEsR0FBQTNILFFBQUEsQ0FBQTRILGFBQUEsQ0FBQSxLQUFBLENBQUE7QUFDQUQsRUFBQUEsY0FBQSxDQUFBakgsU0FBQSxDQUFBRyxHQUFBLENBQUEsU0FBQTtBQUNBOEcsRUFBQUEsY0FBQSxDQUFBdEgsZ0JBQUEsQ0FBQSxPQUFBLEVBQUEsVUFBQUMsQ0FBQSxFQUFBO0FBRUEsUUFBQUEsQ0FBQSxDQUFBdUQsTUFBQSxLQUFBOEQsY0FBQSxFQUFBO0FBQ0FFLE1BQUFBLFlBQUEsQ0FBQUMsS0FBQTtBQUNBO0FBQ0EsR0FMQTtBQU1BLE1BQUFDLGVBQUEsR0FBQS9ILFFBQUEsQ0FBQTRILGFBQUEsQ0FBQSxLQUFBLENBQUE7QUFDQUcsRUFBQUEsZUFBQSxDQUFBckgsU0FBQSxDQUFBRyxHQUFBLENBQUEsb0JBQUE7QUFFQSxNQUFBbUgsY0FBQSxHQUFBaEksUUFBQSxDQUFBNEgsYUFBQSxDQUFBLEtBQUEsQ0FBQTtBQUNBSSxFQUFBQSxjQUFBLENBQUF0SCxTQUFBLENBQUFHLEdBQUEsQ0FBQSxtQkFBQTtBQUNBbUgsRUFBQUEsY0FBQSxDQUFBQyxTQUFBLEdBQUFQLFFBQUE7QUFFQSxNQUFBUSxjQUFBLEdBQUFsSSxRQUFBLENBQUE0SCxhQUFBLENBQUEsS0FBQSxDQUFBO0FBQ0FNLEVBQUFBLGNBQUEsQ0FBQXhILFNBQUEsQ0FBQUcsR0FBQSxDQUFBLGlCQUFBO0FBQ0FxSCxFQUFBQSxjQUFBLENBQUFELFNBQUEsR0FBQS9ILE9BQUE7QUFFQSxNQUFBMkgsWUFBQSxHQUFBN0gsUUFBQSxDQUFBNEgsYUFBQSxDQUFBLEdBQUEsQ0FBQTtBQUNBQyxFQUFBQSxZQUFBLENBQUFuSCxTQUFBLENBQUFHLEdBQUEsQ0FBQSxPQUFBO0FBQ0FnSCxFQUFBQSxZQUFBLENBQUFNLElBQUEsR0FBQSxHQUFBO0FBQ0FOLEVBQUFBLFlBQUEsQ0FBQXhILGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUFDLENBQUEsRUFBQTtBQUNBQSxJQUFBQSxDQUFBLENBQUFDLGNBQUE7QUFDQStHLElBQUFBLE9BQUEsQ0FBQWMsV0FBQSxDQUFBYixXQUFBO0FBQ0FGLElBQUFBLEtBQUEsQ0FBQTNHLFNBQUEsQ0FBQUMsTUFBQSxDQUFBLGFBQUE7QUFDQSxHQUpBO0FBTUFnSCxFQUFBQSxjQUFBLENBQUFGLFdBQUEsQ0FBQU0sZUFBQTtBQUNBQSxFQUFBQSxlQUFBLENBQUFOLFdBQUEsQ0FBQU8sY0FBQTtBQUNBRCxFQUFBQSxlQUFBLENBQUFOLFdBQUEsQ0FBQVMsY0FBQTtBQUNBSCxFQUFBQSxlQUFBLENBQUFOLFdBQUEsQ0FBQUksWUFBQTtBQUVBLFNBQUFGLGNBQUE7QUFDQTs7QUFBQSxDLENDN0NBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEzQyxDQUFBLENBQUEsWUFBQTtBQUVBLE1BQUFxRCxTQUFBLEdBQUEsU0FBQUEsU0FBQSxDQUFBaEUsSUFBQSxFQUFBaUUsUUFBQSxFQUFBO0FBQ0EsUUFBQUMsV0FBQSxHQUFBbEUsSUFBQSxDQUFBMEIsTUFBQSxDQUFBLFNBQUEsQ0FBQTtBQUFBLFFBQ0F5QyxPQUFBLEdBQUFuRSxJQUFBLENBQUFnQixFQUFBLENBQUFpRCxRQUFBLENBREE7QUFBQSxRQUVBRyxRQUFBLEdBQUFELE9BQUEsQ0FBQXJJLEtBQUEsRUFGQTtBQUFBLFFBR0E2RyxRQUFBLEdBQUEsR0FIQTs7QUFLQSxRQUFBd0IsT0FBQSxDQUFBL0gsTUFBQSxFQUFBO0FBQ0E0RCxNQUFBQSxJQUFBLENBQUFxRSxPQUFBLENBQUE7QUFDQSxnQkFBQSxDQUFBRCxRQUFBLEdBQUEsR0FBQSxHQUFBO0FBREEsT0FBQSxFQUVBekIsUUFGQSxFQUVBLFlBQUE7QUFDQXVCLFFBQUFBLFdBQUEsQ0FBQS9DLFdBQUEsQ0FBQSxRQUFBO0FBQ0FnRCxRQUFBQSxPQUFBLENBQUFsRCxRQUFBLENBQUEsUUFBQTtBQUNBLE9BTEE7QUFNQTtBQUNBLEdBZEE7O0FBZ0JBTixFQUFBQSxDQUFBLENBQUEsZ0JBQUEsQ0FBQSxDQUFBcUIsRUFBQSxDQUFBLE9BQUEsRUFBQSxVQUFBL0YsQ0FBQSxFQUFBO0FBQ0FBLElBQUFBLENBQUEsQ0FBQUMsY0FBQTtBQUVBLFFBQUE4RCxJQUFBLEdBQUFXLENBQUEsQ0FBQSx1QkFBQSxDQUFBO0FBQUEsUUFDQTJELFVBQUEsR0FBQXRFLElBQUEsQ0FBQTBCLE1BQUEsQ0FBQSxTQUFBLENBREE7QUFBQSxRQUVBNkMsV0FGQTtBQUFBLFFBRUFDLFFBRkE7QUFBQSxRQUVBTCxPQUZBOztBQUlBLFFBQUF4RCxDQUFBLENBQUEsSUFBQSxDQUFBLENBQUE4RCxRQUFBLENBQUEsYUFBQSxDQUFBLEVBQUE7QUFBQTtBQUNBRixNQUFBQSxXQUFBLEdBQUFELFVBQUEsQ0FBQTFDLElBQUEsRUFBQTtBQUNBNEMsTUFBQUEsUUFBQSxHQUFBeEUsSUFBQSxDQUFBMEUsS0FBQSxFQUFBO0FBQ0E7O0FBRUEsUUFBQS9ELENBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQThELFFBQUEsQ0FBQSxhQUFBLENBQUEsRUFBQTtBQUFBO0FBQ0FGLE1BQUFBLFdBQUEsR0FBQUQsVUFBQSxDQUFBeEMsSUFBQSxFQUFBO0FBQ0EwQyxNQUFBQSxRQUFBLEdBQUF4RSxJQUFBLENBQUEyRSxJQUFBLEVBQUE7QUFDQTs7QUFFQVIsSUFBQUEsT0FBQSxHQUFBSSxXQUFBLENBQUFuSSxNQUFBLEdBQUFtSSxXQUFBLENBQUF6SSxLQUFBLEVBQUEsR0FBQTBJLFFBQUEsQ0FBQTFJLEtBQUEsRUFBQTtBQUVBa0ksSUFBQUEsU0FBQSxDQUFBaEUsSUFBQSxFQUFBbUUsT0FBQSxDQUFBOztBQUNBLFFBQUFJLFdBQUEsQ0FBQW5JLE1BQUEsRUFBQTtBQUNBNEgsTUFBQUEsU0FBQSxDQUFBaEUsSUFBQSxFQUFBdUUsV0FBQSxDQUFBO0FBQ0EsS0FGQSxNQUVBO0FBQ0FQLE1BQUFBLFNBQUEsQ0FBQWhFLElBQUEsRUFBQXdFLFFBQUEsQ0FBQTtBQUNBO0FBQ0EsR0F6QkE7QUEwQkEsQ0E1Q0EsQ0FBQTtBQTRDQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFjY28gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb25fX2l0ZW0nKTtcbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb24tY29udGVudCcpO1xuXG5mb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYWNjby5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBlbGVtZW50ID0gYWNjb1tpbmRleF07XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY28ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKGkgIT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgYWNjb1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRlb24tY29udGVudC0tY29sb3ItLXBvc2l0b2luLS1vdmVyZmxvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGVvbi1jb250ZW50LS1jb2xvci0tcG9zaXRvaW4tLW92ZXJmbG93JykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkZW9uLWNvbnRlbnQtLWNvbG9yLS1wb3NpdG9pbi0tb3ZlcmZsb3cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkZW9uLWNvbnRlbnQtLWNvbG9yLS1wb3NpdG9pbi0tb3ZlcmZsb3cnKTtcbiAgICAgICAgfVxuICAgIH0pXG59IiwiLy8g0JTQvtGB0YLRg9C/INC6INC40L3Qv9GD0YLRgyDRgSDQvdC+0LzQtdGA0L7QvCDRgtC10LvQtdGE0L7QvdCwXG5jb25zdCBmb3JtX19pbnB1dGpzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0anMnKTtcblxuZm9ybV9faW5wdXRqcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICBsZXQgaXNEaWdpdCA9IGZhbHNlO1xuICAgIGxldCBpc0Rhc2ggPSBmYWxzZTtcbiAgICBsZXQgaXNDb250cm9sID0gZmFsc2U7XG5cbiAgICBpZiAoZXZlbnQua2V5ID49IDAgfHwgZXZlbnQua2V0IDw9IDkpIHtcbiAgICAgICAgaXNEaWdpdCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PSAnLScpIHtcbiAgICAgICAgaXNEYXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQua2V5ID09ICdBcnJvd0xlZnQnIHx8IGV2ZW50LmtleSA9PSAnQXJyb3dSaWdodCcgfHwgZXZlbnQua2V5ID09ICdBcnJvd1VwJyB8fCBldmVudC5rZXkgPT0gJ0Fycm93RG93bicgfHwgZXZlbnQua2V5ID09ICdCYWNrc3BhY2UnIHx8IGV2ZW50LmtleSA9PSAnVGFiJykge1xuICAgICAgICBpc0NvbnRyb2wgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWlzRGlnaXQgJiYgIWlzRGFzaCAmJiAhaXNDb250cm9sKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xufSk7XG5cblxuY29uc3QgTXlmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTsgLy8g0JTQvtGB0YLRg9C/INC6INGC0LXQs9GDINGE0L7RgNC8XG5sZXQgZm9ybSA9IG5ldyBGb3JtRGF0YTtcbmNvbnN0IGJ0bmZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLWZvcm0nKTsgLy8g0JTQvtGB0YLRg9C/INC6INC60L3QvtC/0LrQtVxuY29uc3Qgb3ZlcmxheWZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheS1mb3JtJyk7XG5jb25zdCBvdmVybGF5Y29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5LWZvcm1fX2NvbmVudCcpO1xuY29uc3Qgb3ZlcmxheWZvcm1jbG91c2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheS1mb3JtX19jbG91c2UnKTtcbmJ0bmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsgLy8g0JfQsNC/0YDQtdGJ0LDQtdC8INC/0LXRgNC10LfQsNCz0YDRg9C30LrRgyDRgdGA0LDQvdC40YbRiyDQv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDQutC90L7Qv9C60YNcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAodmFsaWRhdGVGb3JtKE15Zm9ybSkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IE15Zm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgcGhvbmU6IE15Zm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSxcbiAgICAgICAgICAgIHN0cmVldDogTXlmb3JtLmVsZW1lbnRzLnN0cmVldC52YWx1ZSxcbiAgICAgICAgICAgIGNvbW1lbnQ6ICdjb21tZXRuJyxcbiAgICAgICAgICAgIGhvdXNlOiBNeWZvcm0uZWxlbWVudHMuaG91c2UudmFsdWUsXG4gICAgICAgICAgICBhcGFydGFtZW50OiBNeWZvcm0uZWxlbWVudHMuYXBhcnRhbWVudC52YWx1ZSxcbiAgICAgICAgICAgIGZsb29yOiBNeWZvcm0uZWxlbWVudHMuZmxvb3IudmFsdWUsXG4gICAgICAgICAgICB0bzogJ2tha3R1cy5aenp6QG1haWwucnUnXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kKGtleSwgZGF0YVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHByb2Nlc3NSZXFDaGFuZ2U7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1JlcUNoYW5nZSgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0L7RiNC40LHQutCwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHhoci5vcGVuKCdQT1NUJywgXCJodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWxcIik7XG4gICAgICAgIHhoci5zZW5kKGZvcm0pO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIG92ZXJsYXlmb3JtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWNvbnRlbnQuaW5uZXJUZXh0ID0gJ9Ch0L7QvtCx0YnQtdC90LjQtSDQvtGC0L/RgNCw0LLQuNC70YzQvdC+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWNvbnRlbnQuaW5uZXJUZXh0ID0gJ9Ce0YLQv9GA0LDQstC40YLRjCDQv9C40YHRjNC80L4g0L3QtSDRg9C00LDQu9C+0YHRjCwg0L/QvtCy0YLQvtGA0LjRgtC1INC30LDQv9GA0L7RgSDQv9C+0LfQttC1JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3ZlcmxheWZvcm1jbG91c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfY2xvc2VkJyk7XG4gICAgICAgICAgICAgICAgTXlmb3JtLnJlc2V0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5X2Nsb3NlZCcpO1xuICAgICAgICAgICAgb3ZlcmxheWZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheWZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X2Nsb3NlZCcpO1xuICAgICAgICAgICAgICAgICAgICBNeWZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KTtcblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcbiAgICBsZXQgdmFsaWQgPSB0cnVlO1xuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMubmFtZSkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5waG9uZSkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5zdHJlZXQpKSB7XG4gICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuaG91c2UpKSB7XG4gICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuYXBhcnRhbWVudCkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5mbG9vcikpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWQ7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGQpIHtcbiAgICBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBmaWVsZC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICByZXR1cm4gZmllbGQuY2hlY2tWYWxpZGl0eSgpO1xufSIsImNvbnN0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb24tbWVudV9faXRlbScpO1xuXG5mb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaXRlbS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBlbGVtZW50ID0gaXRlbVtpbmRleF07XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpdGVtW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGVvbi1tZW51X19jb250ZW50LS1hY3RpdmUtLWNvbG9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGVvbi1tZW51X19jb250ZW50LS1hY3RpdmUtLWNvbG9yJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkZW9uLW1lbnVfX2NvbnRlbnQtLWFjdGl2ZS0tY29sb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkZW9uLW1lbnVfX2NvbnRlbnQtLWFjdGl2ZS0tY29sb3InKTtcbiAgICAgICAgfVxuICAgIH0pXG59XG4iLCJjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyJyk7XG5jb25zdCBhcnJvd3Njcm93dyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnJvd3Njcm9sbCcpO1xuY29uc3QgY29tcHV0ZWQgPSBnZXRDb21wdXRlZFN0eWxlKG5hdnRhYmxldHMpO1xuY29uc3QgY29tcHV0ZWRzY3JvbGwgPSBnZXRDb21wdXRlZFN0eWxlKGFycm93c2Nyb2xsKTtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbmhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICBcbiAgICAvLyBjb25zb2xlLmxvZyhjb21wdXRlZC5kaXNwbGF5KTtcbiAgICBsZXQgZGlzcGxheW5vbmUgPSBjb21wdXRlZC5kaXNwbGF5O1xuICAgIGxldCBhcnJvd3Njcm9sbGJsb2NrID0gY29tcHV0ZWRzY3JvbGwuZGlzcGxheTtcbiAgICBcblxuICAgIGlmIChkaXNwbGF5bm9uZSA9PSAnbm9uZScpIHtcbiAgICAgICAgbmF2dGFibGV0cy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2JvZHlfY2xvc2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmF2dGFibGV0cy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfY2xvc2VkJyk7XG4gICAgfVxuXG4gICAgaWYgKCBhcnJvd3Njcm9sbGJsb2NrID09ICdibG9jaycpIHtcbiAgICAgICAgYXJyb3dzY3JvbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJvd3Njcm9sbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG59KTsiLCJjb25zdCBzZWN0aW9ucyA9ICQoJy5zZWN0aW9uJyk7XHJcbmNvbnN0IGRpc3BsYXkgPSAkKCcubWFpbmNvbnRlbnQnKTtcclxubGV0IGluU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5jb25zdCBwZXJmb3JtVHJhbnNpdGlvbiA9IHNlY3Rpb25FcSA9PiB7XHJcbiAgICBpZiAoaW5TY3JvbGwgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgaW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gc2VjdGlvbkVxICogLTEwMDtcclxuICAgICAgICBzZWN0aW9uc1xyXG4gICAgICAgICAgICAuZXEoc2VjdGlvbkVxKVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgIC5zaWJsaW5ncygpXHJcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIGRpc3BsYXkuY3NzKHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3Bvc2l0aW9ufSUpYFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaW5TY3JvbGwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICQoJy5jb2x1bW5fX2l0ZW0nKVxyXG4gICAgICAgICAgICAgICAgLmVxKHNlY3Rpb25FcSlcclxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY29sdW1uX19kb3QtLWFjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICAuc2libGluZ3MoKVxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdjb2x1bW5fX2RvdC0tYWN0aXZlJyk7XHJcbiAgICAgICAgfSwgMTMwMCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBzY3JvbGxUb1NlY3Rpb24gPSBkaXJlY3Rpb24gPT4ge1xyXG4gICAgY29uc3QgYWN0aXZlU2VjdGlvbiA9IHNlY3Rpb25zLmZpbHRlcignLmFjdGl2ZScpO1xyXG4gICAgY29uc3QgbmV4dFNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLm5leHQoKTtcclxuICAgIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gJ25leHQnICYmIG5leHRTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKG5leHRTZWN0aW9uLmluZGV4KCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICdwcmV2JyAmJiBwcmV2U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbihwcmV2U2VjdGlvbi5pbmRleCgpKTtcclxuICAgIH1cclxufTtcclxuXHJcbiQod2luZG93KS5vbignd2hlZWwnLCBlID0+IHtcclxuICAgIGNvbnN0IGRlbHRhWSA9IGUub3JpZ2luYWxFdmVudC5kZWx0YVk7XHJcblxyXG4gICAgaWYgKGRlbHRhWSA+IDApIHtcclxuICAgICAgICBzY3JvbGxUb1NlY3Rpb24oJ25leHQnKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVsdGFZIDwgMCkge1xyXG4gICAgICAgIHNjcm9sbFRvU2VjdGlvbigncHJldicpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiQod2luZG93KS5vbigna2V5ZG93bicsIGUgPT4ge1xyXG4gICAgY29uc3QgdGFnTmFtZSA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBpZiAodGFnTmFtZSAhPSAnaW5wdXQnICYmIHRhZ05hbWUgIT0gJ3RleHRhcmVhJykge1xyXG4gICAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMzg6XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxUb1NlY3Rpb24oJ3ByZXYnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQwOlxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9TZWN0aW9uKCduZXh0Jyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSk7XHJcblxyXG4kKCdbZGF0YS1zY3JvbGwtdG9dJykub24oJ2NsaWNrJywgZSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCAkdGhpcyA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHRhcmdldCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2Nyb2xsLXRvJyk7XHJcblxyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24odGFyZ2V0KTtcclxufSk7XHJcblxyXG4kKFwiYm9keVwiKS5zd2lwZSh7XHJcbiAgICBzd2lwZTogZnVuY3Rpb24gXHJcbiAgICAoZXZlbnQsXHJcbiAgICBkaXJlY3Rpb24sIFxyXG4gICAgZGlzdGFuY2UsIFxyXG4gICAgZHVyYXRpb24sXHJcbiAgICBmaW5nZXJDb3VudCwgXHJcbiAgICBmaW5nZXJEYXRhKSB7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsRGlyZWN0aW9uID0gZGlyZWN0aW9uID09PSAndXAnID8gJ25leHQnIDogJ3ByZXYnO1xyXG5cclxuICAgICAgICBzY3JvbGxUb1NlY3Rpb24oc2Nyb2xsRGlyZWN0aW9uKTtcclxuICAgIH1cclxufSk7IiwiY29uc3QgYnV0dG9uT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXR0b25PcGVuJyk7XG5jb25zdCBib2R5MSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbmNvbnN0IHJldmlld3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmV2aWV3c2pzJyk7XG5jb25zdCBvcGVuT3ZlcmxheSA9IHJldmlld092ZXJsYXkoJ9Ca0L7QvdGB0YLQsNC90YLQuNC9INCh0L/QuNC70LHQtdGA0LMnLCAn0JzRi9GB0LvQuCDQstGB0LUg0L4g0L3QuNGFINC4INC+INC90LjRhSwg0L4g0L3QuNGFINC4INC+INC90LjRhS4g0J3QtdC70YzQt9GPINGD0YHRgtC+0Y/RgtGMLCDQvdC10LLQvtC30LzQvtC20L3QviDQt9Cw0LHRi9GC0YwuLi4g0J3QuNC60L7Qs9C00LAg0L3QtSDQtNGD0LzQsNC7LCDRh9GC0L4g0LHRg9C70L7Rh9C60Lgg0LzQvtCz0YPRgiDQsdGL0YLRjCDRgtCw0LrQuNC80Lgg0LzRj9Cz0LrQuNC80LgsINC60L7RgtC70LXRgtC60LAg0YLQsNC60L7QuSDRgdC+0YfQvdC+0LksINCwINGB0YvRgCDRgtCw0LrQuNC8INGA0LDRgdC/0LvQsNCy0LvQtdC90L3Ri9C8LiDQnNGL0YHQu9C4INCy0YHQtSDQviDQvdC40YUg0Lgg0L4g0L3QuNGFLCDQviDQvdC40YUg0Lgg0L4g0L3QuNGFLiDQndC10LvRjNC30Y8g0YPRgdGC0L7Rj9GC0YwsINC90LXQstC+0LfQvNC+0LbQvdC+INC30LDQsdGL0YLRjC4uLiDQndC40LrQvtCz0LTQsCDQvdC1INC00YPQvNCw0LssINGH0YLQviDQsdGD0LvQvtGH0LrQuCDQvNC+0LPRg9GCINCx0YvRgtGMINGC0LDQutC40LzQuCDQvNGP0LPQutC40LzQuCwg0LrQvtGC0LvQtdGC0LrQsCDRgtCw0LrQvtC5INGB0L7Rh9C90L7QuSwg0LAg0YHRi9GAINGC0LDQutC40Lwg0YDQsNGB0L/Qu9Cw0LLQu9C10L3QvdGL0LwuJyk7XG5cbiQoJy5idXR0b25PcGVuJykub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgIHJldmlld3MuYXBwZW5kQ2hpbGQob3Blbk92ZXJsYXkpO1xuICAgIGJvZHkxLmNsYXNzTGlzdC5hZGQoJ2JvZHlfY2xvc2VkJyk7XG59KVxuXG5mdW5jdGlvbiByZXZpZXdPdmVybGF5KHVzZXJuYW1lLCBjb250ZW50KSB7XG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5Jyk7XG4gICAgb3ZlcmxheUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IG92ZXJsYXlFbGVtZW50KSB7XG4gICAgICAgICAgICBjbG9zZUVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGNvbmFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbmFpbmVyRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdvdmVybGF5X19jb250YWluZXInKTtcblxuICAgIGNvbnN0IHVzZXJtYWVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdXNlcm1hZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheV9fdXNlcm5hbWUnKTtcbiAgICB1c2VybWFlRWxlbWVudC5pbm5lckhUTUwgPSB1c2VybmFtZTtcblxuICAgIGNvbnN0IGNvbnRlbnRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheS1jb250ZW50Jyk7XG4gICAgY29udGVudEVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudDtcblxuICAgIGNvbnN0IGNsb3NlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBjbG9zZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnY2xvc2UnKTtcbiAgICBjbG9zZUVsZW1lbnQuaHJlZiA9IFwiI1wiO1xuICAgIGNsb3NlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldmlld3MucmVtb3ZlQ2hpbGQob3Blbk92ZXJsYXkpO1xuICAgICAgICBib2R5MS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X2Nsb3NlZCcpO1xuICAgIH0pO1xuXG4gICAgb3ZlcmxheUVsZW1lbnQuYXBwZW5kQ2hpbGQoY29uYWluZXJFbGVtZW50KTtcbiAgICBjb25haW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQodXNlcm1hZUVsZW1lbnQpO1xuICAgIGNvbmFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChjb250ZW50RWxlbWVudCk7XG4gICAgY29uYWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGNsb3NlRWxlbWVudCk7XG5cbiAgICByZXR1cm4gb3ZlcmxheUVsZW1lbnQ7XG59IiwiLy8gY29uc3QgbGVmdGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tcHJldicpO1xuLy8gY29uc3QgcmlnaHRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLW5leHQnKTtcbi8vIGNvbnN0IGl0ZW1saXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUtc2xpZGVyX19saXN0Jyk7XG5cblxuLy8gcmlnaHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuLy8gICAgIGxvb3AoJ3JpZ2h0YnV0dG9uJywgZSk7XG4vLyB9KTtcblxuLy8gbGVmdGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4vLyAgICAgbG9vcCgnbGVmdGJ1dHRvbicsIGUpO1xuLy8gfSk7XG5cbi8vIGZ1bmN0aW9uIGxvb3AoZGlyZWN0aW9uLCBlKSB7XG4vLyAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuLy8gICAgIGlmIChkaXJlY3Rpb24gPT0gcmlnaHRidXR0b24pIHtcbi8vICAgICAgICAgaXRlbWxpc3QuYXBwZW5kQ2hpbGQoaXRlbWxpc3QuZmlyc3RFbGVtZW50Q2hpbGQpO1xuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICAgIGl0ZW1saXN0Lmluc2VydEJlZm9yZShpdGVtbGlzdC5sYXN0RWxlbWVudENoaWxkLCBpdGVtbGlzdC5maXJzdEVsZW1lbnRDaGlsZCk7XG4vLyAgICAgfVxuLy8gfVxuXG4kKGZ1bmN0aW9uICgpIHtcblxuICAgIGxldCBtb3ZlU2xpZGUgPSBmdW5jdGlvbiAoaXRlbSwgc2xpZGVOdW0pIHtcbiAgICAgICAgdmFyIGFjdGl2ZVNsaWRlID0gaXRlbS5maWx0ZXIoJy5hY3RpdmUnKSxcbiAgICAgICAgICAgIHJlcUl0ZW0gPSBpdGVtLmVxKHNsaWRlTnVtKSxcbiAgICAgICAgICAgIHJlcUluZGV4ID0gcmVxSXRlbS5pbmRleCgpLFxuICAgICAgICAgICAgZHVyYXRpb24gPSA1MDA7XG5cbiAgICAgICAgaWYgKHJlcUl0ZW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBpdGVtLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICdsZWZ0JzogLXJlcUluZGV4ICogMTAwICsgJyUnXG4gICAgICAgICAgICB9LCBkdXJhdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGFjdGl2ZVNsaWRlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICByZXFJdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkKCcuYnV0dG9uLXNsaWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBsZXQgaXRlbSA9ICQoJy5tZW51LXNsaWRlcl9fY29udGVudCcpLFxuICAgICAgICAgICAgYWN0aXZlSXRlbSA9IGl0ZW0uZmlsdGVyKCcuYWN0aXZlJyksXG4gICAgICAgICAgICBleGlzdGVkSXRlbSwgZWRnZUl0ZW0sIHJlcUl0ZW07XG5cbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2J1dHRvbi1uZXh0JykpIHsgLy8g0LLQv9C10YDRkdC0XG4gICAgICAgICAgICBleGlzdGVkSXRlbSA9IGFjdGl2ZUl0ZW0ubmV4dCgpO1xuICAgICAgICAgICAgZWRnZUl0ZW0gPSBpdGVtLmZpcnN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYnV0dG9uLXByZXYnKSkgeyAvLyDQvdCw0LfQsNC0XG4gICAgICAgICAgICBleGlzdGVkSXRlbSA9IGFjdGl2ZUl0ZW0ucHJldigpO1xuICAgICAgICAgICAgZWRnZUl0ZW0gPSBpdGVtLmxhc3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcUl0ZW0gPSBleGlzdGVkSXRlbS5sZW5ndGggPyBleGlzdGVkSXRlbS5pbmRleCgpIDogZWRnZUl0ZW0uaW5kZXgoKTtcblxuICAgICAgICBtb3ZlU2xpZGUoaXRlbSwgcmVxSXRlbSk7XG4gICAgICAgIGlmIChleGlzdGVkSXRlbS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG1vdmVTbGlkZShpdGVtLCBleGlzdGVkSXRlbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtb3ZlU2xpZGUoaXRlbSwgZWRnZUl0ZW0pO1xuICAgICAgICB9XG4gICAgfSk7XG59KTsiXX0=
