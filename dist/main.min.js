"use strict";

var acco = document.getElementsByClassName('accordeon__item');
var content = document.getElementsByClassName('accordeon-content');

var _loop = function _loop(index) {
  var element = acco[index];
  element.addEventListener('click', function (e) {
    e.preventDefault();

    for (var i = 0; i < acco.length; i++) {
      if (i !== index) {
        acco[i].classList.remove('accordeon-content--color--positoin--overflow');
      }
    }

    if (element.classList.contains('accordeon-content--color--positoin--overflow')) {
      element.classList.remove('accordeon-content--color--positoin--overflow');
    } else {
      element.classList.add('accordeon-content--color--positoin--overflow');
    }
  });
};

for (var index = 0; index < acco.length; index++) {
  _loop(index);
}

; // Доступ к инпуту с номером телефона

var form__inputjs = document.querySelector('.form__inputjs');
form__inputjs.addEventListener('keydown', function (e) {
  var isDigit = false;
  var isDash = false;
  var isControl = false;

  if (event.key >= 0 || event.ket <= 9) {
    isDigit = true;
  }

  if (event.key == '-') {
    isDash = true;
  }

  if (event.key == 'ArrowLeft' || event.key == 'ArrowRight' || event.key == 'ArrowUp' || event.key == 'ArrowDown' || event.key == 'Backspace' || event.key == 'Tab') {
    isControl = true;
  }

  if (!isDigit && !isDash && !isControl) {
    e.preventDefault();
  } // console.log(event);

});
var Myform = document.querySelector('.form'); // Доступ к тегу форм

var form = new FormData();
var btnform = document.querySelector('#btn-form'); // Доступ к кнопке

var overlayform = document.querySelector('.overlay-form');
var overlaycontent = document.querySelector('.overlay-form__conent');
var overlayformclouse = document.querySelector('.overlay-form__clouse');
btnform.addEventListener('click', function (e) {
  // Запрещаем перезагрузку сраницы при нажатии на кнопку
  e.preventDefault();

  if (validateForm(Myform)) {
    var processReqChange = function processReqChange() {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          var message = JSON.parse(xhr.response);
          console.log(message);
        } else {// ошибка
        }
      }
    };

    var data = {
      name: Myform.elements.name.value,
      phone: Myform.elements.phone.value,
      street: Myform.elements.street.value,
      comment: 'commetn',
      house: Myform.elements.house.value,
      apartament: Myform.elements.apartament.value,
      floor: Myform.elements.floor.value,
      to: 'kaktus.Zzzz@mail.ru'
    };

    for (var key in data) {
      form.append(key, data[key]);
    }

    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = processReqChange;
    xhr.open('POST', "https://webdev-api.loftschool.com/sendmail");
    xhr.send(form);
    xhr.addEventListener('load', function () {
      overlayform.style.display = 'flex';

      if (xhr.status === 200) {
        overlaycontent.innerText = 'Сообщение отправильно';
      } else {
        overlaycontent.innerText = 'Отправить письмо не удалось, повторите запрос позже';
      }

      overlayformclouse.addEventListener('click', function (e) {
        e.preventDefault();
        overlayform.style.display = 'none';
        body.classList.remove('body_closed');
        Myform.reset();
      });
      body.classList.add('body_closed');
      overlayform.addEventListener('click', function (e) {
        if (e.target === overlayform) {
          overlayform.style.display = 'none';
          body.classList.remove('body_closed');
          Myform.reset();
        }
      });
    });
  }
});

function validateForm(form) {
  var valid = true;

  if (!validateField(form.elements.name)) {
    valid = false;
  }

  if (!validateField(form.elements.phone)) {
    valid = false;
  }

  if (!validateField(form.elements.street)) {
    valid = false;
  }

  if (!validateField(form.elements.house)) {
    valid = false;
  }

  if (!validateField(form.elements.apartament)) {
    valid = false;
  }

  if (!validateField(form.elements.floor)) {
    valid = false;
  }

  return valid;
}

function validateField(field) {
  field.nextElementSibling.textContent = field.validationMessage;
  return field.checkValidity();
}

;
var item = document.getElementsByClassName('accordeon-menu__item');

var _loop2 = function _loop2(_index) {
  var element = item[_index];
  element.addEventListener('click', function (e) {
    e.preventDefault();

    for (var i = 0; i < item.length; i++) {
      if (i !== _index) {
        item[i].classList.remove('accordeon-menu__content--active--color');
      }
    }

    if (element.classList.contains('accordeon-menu__content--active--color')) {
      element.classList.remove('accordeon-menu__content--active--color');
    } else {
      element.classList.add('accordeon-menu__content--active--color');
    }
  });
};

for (var _index = 0; _index < item.length; _index++) {
  _loop2(_index);
}

;
var hamburger = document.querySelector('#hamburger');
var arrowscroww = document.querySelector('#arrowscroll');
var computed = getComputedStyle(navtablets);
var computedscroll = getComputedStyle(arrowscroll);
var body = document.querySelector('body');
hamburger.addEventListener('click', function (e) {
  e.preventDefault(); // console.log(computed.display);

  var displaynone = computed.display;
  var arrowscrollblock = computedscroll.display;

  if (displaynone == 'none') {
    navtablets.style.display = 'flex';
    body.classList.add('body_closed');
  } else {
    navtablets.style.display = 'none';
    body.classList.remove('body_closed');
  }

  if (arrowscrollblock == 'block') {
    arrowscroll.style.display = 'none';
  } else {
    arrowscroll.style.display = 'block';
  }
});
;
var sections = $('.section');
var display = $('.maincontent');
var inScroll = false;
var md = new MobileDetect(window.navigator.userAgent);
var isMobile = md.mobile();

var changeFixedMenuActiveItem = function changeFixedMenuActiveItem() {
  $('.column__item').eq(sectionEq).addClass('column__dot--active').siblings().removeClass('column__dot--active');
};

var performTransition = function performTransition(sectionEq) {
  if (inScroll) return;
  inScroll = true;
  var transitionIsOver = 1000;
  var mouseInertionIsOver = 300;
  var position = sectionEq * -100;
  if (isNaN(position)) console.error('передли неверное значение в performTransition');
  sections.eq(sectionEq).addClass('active').siblings().removeClass('active');
  display.css({
    transform: "translateY(".concat(position, "%)")
  });
  setTimeout(function () {
    inScroll = false;
    changeFixedMenuActiveItem();
  }, transitionIsOver + mouseInertionIsOver);
};

var scrollToSection = function scrollToSection(direction) {
  var activeSection = sections.filter('.active');
  var nextSection = activeSection.next();
  var prevSection = activeSection.prev();

  if (direction === 'next' && nextSection.length) {
    performTransition(nextSection.index());
  }

  if (direction === 'prev' && prevSection.length) {
    performTransition(prevSection.index());
  }
};

$(window).on('wheel', function (e) {
  var deltaY = e.originalEvent.deltaY;

  if (deltaY > 0) {
    scrollToSection('next');
  }

  if (deltaY < 0) {
    scrollToSection('prev');
  }
});
$(window).on('keydown', function (e) {
  var tagName = e.target.tagName.toLowerCase();
  var usersTypingInInpust = tagName === 'input' || tagName === 'textarea';
  if (usersTypingInInpust) return;

  switch (e.keyCode) {
    case 38:
      scrollToSection('prev');
      break;

    case 40:
      scrollToSection('next');
      break;
  }
});
$('[data-scroll-to]').on('click', function (e) {
  e.preventDefault();
  var $this = $(e.currentTarget);
  var target = $this.attr('data-scroll-to');
  performTransition(target);
});

if (isMobile) {
  $("body").swipe({
    swipe: function swipe(event, direction, distance, duration, fingerCount, fingerData) {
      var scrollDirection = direction === 'up' ? 'next' : 'prev';
      scrollToSection(scrollDirection);
    }
  });
}

;
var buttonOpen = document.querySelector('#buttonOpen');
var body1 = document.querySelector('body');
var reviews = document.querySelector('#reviewsjs');
var openOverlay = reviewOverlay('Константин Спилберг', 'Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным. Мысли все о них и о них, о них и о них. Нельзя устоять, невозможно забыть... Никогда не думал, что булочки могут быть такими мягкими, котлетка такой сочной, а сыр таким расплавленным.');
$('.buttonOpen').on('click', function () {
  reviews.appendChild(openOverlay);
  body1.classList.add('body_closed');
});

function reviewOverlay(username, content) {
  var overlayElement = document.createElement('div');
  overlayElement.classList.add('overlay');
  overlayElement.addEventListener('click', function (e) {
    if (e.target === overlayElement) {
      closeElement.click();
    }
  });
  var conainerElement = document.createElement('div');
  conainerElement.classList.add('overlay__container');
  var usermaeElement = document.createElement('div');
  usermaeElement.classList.add('overlay__username');
  usermaeElement.innerHTML = username;
  var contentElement = document.createElement('div');
  contentElement.classList.add('overlay-content');
  contentElement.innerHTML = content;
  var closeElement = document.createElement('a');
  closeElement.classList.add('close');
  closeElement.href = "#";
  closeElement.addEventListener('click', function (e) {
    e.preventDefault();
    reviews.removeChild(openOverlay);
    body1.classList.remove('body_closed');
  });
  overlayElement.appendChild(conainerElement);
  conainerElement.appendChild(usermaeElement);
  conainerElement.appendChild(contentElement);
  conainerElement.appendChild(closeElement);
  return overlayElement;
}

; // const leftbutton = document.querySelector('.button-prev');
// const rightbutton = document.querySelector('.button-next');
// const itemlist = document.querySelector('.menu-slider__list');
// rightbutton.addEventListener('click', function (e) {
//     loop('rightbutton', e);
// });
// leftbutton.addEventListener('click', function (e) {
//     loop('leftbutton', e);
// });
// function loop(direction, e) {
//     e.preventDefault();
//     if (direction == rightbutton) {
//         itemlist.appendChild(itemlist.firstElementChild);
//     } else {
//         itemlist.insertBefore(itemlist.lastElementChild, itemlist.firstElementChild);
//     }
// }

$(function () {
  var moveSlide = function moveSlide(item, slideNum) {
    var activeSlide = item.filter('.active'),
        reqItem = item.eq(slideNum),
        reqIndex = reqItem.index(),
        duration = 500;

    if (reqItem.length) {
      item.animate({
        'left': -reqIndex * 100 + '%'
      }, duration, function () {
        activeSlide.removeClass('active');
        reqItem.addClass('active');
      });
    }
  };

  $('.button-slider').on('click', function (e) {
    e.preventDefault();
    var item = $('.menu-slider__content'),
        activeItem = item.filter('.active'),
        existedItem,
        edgeItem,
        reqItem;

    if ($(this).hasClass('button-next')) {
      // вперёд
      existedItem = activeItem.next();
      edgeItem = item.first();
    }

    if ($(this).hasClass('button-prev')) {
      // назад
      existedItem = activeItem.prev();
      edgeItem = item.last();
    }

    reqItem = existedItem.length ? existedItem.index() : edgeItem.index();
    moveSlide(item, reqItem);

    if (existedItem.length) {
      moveSlide(item, existedItem);
    } else {
      moveSlide(item, edgeItem);
    }
  });
});
;
var vid = document.getElementsByTagName('video')[0];
var playBtn = document.getElementById('player__start');
var playBtnStart = document.getElementById('player__button-start');
var svgIcon = $('.icon-play');
var btnPaused = $('.player__start');
var volumeControl = $('.player__playsound');
var playTime = $('.player__duratipn-completed');
playBtn.addEventListener('click', function () {
  if (vid.paused) {
    btnPaused.addClass('paused');
    playBtnStart.classList.add('play__button-none');
    svgIcon.css({
      display: 'none'
    });
    vid.play();
  } else {
    vid.pause();
    btnPaused.removeClass('paused');
    svgIcon.css({
      display: 'block'
    });
  }
}, false);
playBtnStart.addEventListener('click', function () {
  if (vid.paused) {
    playBtnStart.classList.add('paused');
    vid.play();
  } else {
    vid.pause();
  }
}, false);
;
ymaps.ready(init);

function init() {
  var myMap = new ymaps.Map("map", {
    center: [59.92, 30.28],
    zoom: 12,
    controls: ['zoomControl'],
    behaviors: ['drag']
  });
  var Myplacemark = new ymaps.Placemark([59.97, 30.31], {
    hintContent: '<div class="map__hint">ул. Литераторов, д.19</div>',
    balloonContent: ['<div class="map__baloon">', 'Cамые вкусные бургеры у нас! Заходите с 10:00 до 21:00 по адресу: ул. Литераторов, д.19', '</div>'].join('')
  }, {
    iconLayout: 'default#image',
    iconImageHref: 'img/icons/map-marker.svg',
    iconImageSize: [92, 69]
  });
  myMap.geoObjects.add(Myplacemark);
}

;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY28tdGVhbS5qcyIsImZvcm0uanMiLCJtZW51LWFjY29yZGVvbi5qcyIsIm5hdi5qcyIsIm9uZS1wYWdlLXNjcm9sbC5qcyIsInJldmlld3MuanMiLCJzbGlkZXIuanMiLCJ2aWRlb1BsYXkuanMiLCJ5YW5kZXhNYXBzLmpzIl0sIm5hbWVzIjpbImFjY28iLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjb250ZW50IiwiaW5kZXgiLCJlbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImkiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJjb250YWlucyIsImFkZCIsImZvcm1fX2lucHV0anMiLCJxdWVyeVNlbGVjdG9yIiwiaXNEaWdpdCIsImlzRGFzaCIsImlzQ29udHJvbCIsImV2ZW50Iiwia2V5Iiwia2V0IiwiTXlmb3JtIiwiZm9ybSIsIkZvcm1EYXRhIiwiYnRuZm9ybSIsIm92ZXJsYXlmb3JtIiwib3ZlcmxheWNvbnRlbnQiLCJvdmVybGF5Zm9ybWNsb3VzZSIsInZhbGlkYXRlRm9ybSIsInByb2Nlc3NSZXFDaGFuZ2UiLCJ4aHIiLCJyZWFkeVN0YXRlIiwic3RhdHVzIiwibWVzc2FnZSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlIiwiY29uc29sZSIsImxvZyIsImRhdGEiLCJuYW1lIiwiZWxlbWVudHMiLCJ2YWx1ZSIsInBob25lIiwic3RyZWV0IiwiY29tbWVudCIsImhvdXNlIiwiYXBhcnRhbWVudCIsImZsb29yIiwidG8iLCJhcHBlbmQiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIm9wZW4iLCJzZW5kIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5uZXJUZXh0IiwiYm9keSIsInJlc2V0IiwidGFyZ2V0IiwidmFsaWQiLCJ2YWxpZGF0ZUZpZWxkIiwiZmllbGQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tWYWxpZGl0eSIsIml0ZW0iLCJoYW1idXJnZXIiLCJhcnJvd3Njcm93dyIsImNvbXB1dGVkIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm5hdnRhYmxldHMiLCJjb21wdXRlZHNjcm9sbCIsImFycm93c2Nyb2xsIiwiZGlzcGxheW5vbmUiLCJhcnJvd3Njcm9sbGJsb2NrIiwic2VjdGlvbnMiLCIkIiwiaW5TY3JvbGwiLCJtZCIsIk1vYmlsZURldGVjdCIsIndpbmRvdyIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzTW9iaWxlIiwibW9iaWxlIiwiY2hhbmdlRml4ZWRNZW51QWN0aXZlSXRlbSIsImVxIiwic2VjdGlvbkVxIiwiYWRkQ2xhc3MiLCJzaWJsaW5ncyIsInJlbW92ZUNsYXNzIiwicGVyZm9ybVRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uSXNPdmVyIiwibW91c2VJbmVydGlvbklzT3ZlciIsInBvc2l0aW9uIiwiaXNOYU4iLCJlcnJvciIsImNzcyIsInRyYW5zZm9ybSIsInNldFRpbWVvdXQiLCJzY3JvbGxUb1NlY3Rpb24iLCJkaXJlY3Rpb24iLCJhY3RpdmVTZWN0aW9uIiwiZmlsdGVyIiwibmV4dFNlY3Rpb24iLCJuZXh0IiwicHJldlNlY3Rpb24iLCJwcmV2Iiwib24iLCJkZWx0YVkiLCJvcmlnaW5hbEV2ZW50IiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwidXNlcnNUeXBpbmdJbklucHVzdCIsImtleUNvZGUiLCIkdGhpcyIsImN1cnJlbnRUYXJnZXQiLCJhdHRyIiwic3dpcGUiLCJkaXN0YW5jZSIsImR1cmF0aW9uIiwiZmluZ2VyQ291bnQiLCJmaW5nZXJEYXRhIiwic2Nyb2xsRGlyZWN0aW9uIiwiYnV0dG9uT3BlbiIsImJvZHkxIiwicmV2aWV3cyIsIm9wZW5PdmVybGF5IiwicmV2aWV3T3ZlcmxheSIsImFwcGVuZENoaWxkIiwidXNlcm5hbWUiLCJvdmVybGF5RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbG9zZUVsZW1lbnQiLCJjbGljayIsImNvbmFpbmVyRWxlbWVudCIsInVzZXJtYWVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY29udGVudEVsZW1lbnQiLCJocmVmIiwicmVtb3ZlQ2hpbGQiLCJtb3ZlU2xpZGUiLCJzbGlkZU51bSIsImFjdGl2ZVNsaWRlIiwicmVxSXRlbSIsInJlcUluZGV4IiwiYW5pbWF0ZSIsImFjdGl2ZUl0ZW0iLCJleGlzdGVkSXRlbSIsImVkZ2VJdGVtIiwiaGFzQ2xhc3MiLCJmaXJzdCIsImxhc3QiLCJ2aWQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBsYXlCdG4iLCJnZXRFbGVtZW50QnlJZCIsInBsYXlCdG5TdGFydCIsInN2Z0ljb24iLCJidG5QYXVzZWQiLCJ2b2x1bWVDb250cm9sIiwicGxheVRpbWUiLCJwYXVzZWQiLCJwbGF5IiwicGF1c2UiLCJ5bWFwcyIsInJlYWR5IiwiaW5pdCIsIm15TWFwIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImNvbnRyb2xzIiwiYmVoYXZpb3JzIiwiTXlwbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJoaW50Q29udGVudCIsImJhbGxvb25Db250ZW50Iiwiam9pbiIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImdlb09iamVjdHMiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsSUFBQSxHQUFBQyxRQUFBLENBQUFDLHNCQUFBLENBQUEsaUJBQUEsQ0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsUUFBQSxDQUFBQyxzQkFBQSxDQUFBLG1CQUFBLENBQUE7OzJCQUVBRSxLO0FBQ0EsTUFBQUMsT0FBQSxHQUFBTCxJQUFBLENBQUFJLEtBQUEsQ0FBQTtBQUNBQyxFQUFBQSxPQUFBLENBQUFDLGdCQUFBLENBQUEsT0FBQSxFQUFBLFVBQUFDLENBQUEsRUFBQTtBQUNBQSxJQUFBQSxDQUFBLENBQUFDLGNBQUE7O0FBQ0EsU0FBQSxJQUFBQyxDQUFBLEdBQUEsQ0FBQSxFQUFBQSxDQUFBLEdBQUFULElBQUEsQ0FBQVUsTUFBQSxFQUFBRCxDQUFBLEVBQUEs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SSxHQUFBLENBQUEsS0FBQSxFQUFBO0FBQ0FDLElBQUFBLE1BQUEsRUFBQSxDQUFBLEtBQUEsRUFBQSxLQUFBLENBREE7QUFFQUMsSUFBQUEsSUFBQSxFQUFBLEVBRkE7QUFHQUMsSUFBQUEsUUFBQSxFQUFBLENBQUEsYUFBQSxDQUhBO0FBSUFDLElBQUFBLFNBQUEsRUFBQSxDQUFBLE1BQUE7QUFKQSxHQUFBLENBQUE7QUFPQSxNQUFBQyxXQUFBLEdBQUEsSUFBQVQsS0FBQSxDQUFBVSxTQUFBLENBQUEsQ0FBQSxLQUFBLEVBQUEsS0FBQSxDQUFBLEVBQUE7QUFDQUMsSUFBQUEsV0FBQSxFQUFBLG9EQURBO0FBRUFDLElBQUFBLGNBQUEsRUFBQSxDQUNBLDJCQURBLEVBRUEseUZBRkEsRUFHQSxRQUhBLEVBSUFDLElBSkEsQ0FJQSxFQUpBO0FBRkEsR0FBQSxFQVFBO0FBQ0FDLElBQUFBLFVBQUEsRUFBQSxlQURBO0FBRUFDLElBQUFBLGFBQUEsRUFBQSwwQkFGQTtBQUdBQyxJQUFBQSxhQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQTtBQUhBLEdBUkEsQ0FBQTtBQWNBYixFQUFBQSxLQUFBLENBQUFjLFVBQUEsQ0FBQTdLLEdBQUEsQ0FBQXFLLFdBQUE7QUFDQTs7QUFBQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFjY28gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb25fX2l0ZW0nKTtcbmNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb24tY29udGVudCcpO1xuXG5mb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYWNjby5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBlbGVtZW50ID0gYWNjb1tpbmRleF07XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjY28ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmKGkgIT09IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgYWNjb1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdhY2NvcmRlb24tY29udGVudC0tY29sb3ItLXBvc2l0b2luLS1vdmVyZmxvdycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGVvbi1jb250ZW50LS1jb2xvci0tcG9zaXRvaW4tLW92ZXJmbG93JykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkZW9uLWNvbnRlbnQtLWNvbG9yLS1wb3NpdG9pbi0tb3ZlcmZsb3cnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkZW9uLWNvbnRlbnQtLWNvbG9yLS1wb3NpdG9pbi0tb3ZlcmZsb3cnKTtcbiAgICAgICAgfVxuICAgIH0pXG59IiwiLy8g0JTQvtGB0YLRg9C/INC6INC40L3Qv9GD0YLRgyDRgSDQvdC+0LzQtdGA0L7QvCDRgtC10LvQtdGE0L7QvdCwXG5jb25zdCBmb3JtX19pbnB1dGpzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0anMnKTtcblxuZm9ybV9faW5wdXRqcy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICBsZXQgaXNEaWdpdCA9IGZhbHNlO1xuICAgIGxldCBpc0Rhc2ggPSBmYWxzZTtcbiAgICBsZXQgaXNDb250cm9sID0gZmFsc2U7XG5cbiAgICBpZiAoZXZlbnQua2V5ID49IDAgfHwgZXZlbnQua2V0IDw9IDkpIHtcbiAgICAgICAgaXNEaWdpdCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmtleSA9PSAnLScpIHtcbiAgICAgICAgaXNEYXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQua2V5ID09ICdBcnJvd0xlZnQnIHx8IGV2ZW50LmtleSA9PSAnQXJyb3dSaWdodCcgfHwgZXZlbnQua2V5ID09ICdBcnJvd1VwJyB8fCBldmVudC5rZXkgPT0gJ0Fycm93RG93bicgfHwgZXZlbnQua2V5ID09ICdCYWNrc3BhY2UnIHx8IGV2ZW50LmtleSA9PSAnVGFiJykge1xuICAgICAgICBpc0NvbnRyb2wgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIWlzRGlnaXQgJiYgIWlzRGFzaCAmJiAhaXNDb250cm9sKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coZXZlbnQpO1xufSk7XG5cblxuY29uc3QgTXlmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTsgLy8g0JTQvtGB0YLRg9C/INC6INGC0LXQs9GDINGE0L7RgNC8XG5sZXQgZm9ybSA9IG5ldyBGb3JtRGF0YTtcbmNvbnN0IGJ0bmZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnRuLWZvcm0nKTsgLy8g0JTQvtGB0YLRg9C/INC6INC60L3QvtC/0LrQtVxuY29uc3Qgb3ZlcmxheWZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheS1mb3JtJyk7XG5jb25zdCBvdmVybGF5Y29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5LWZvcm1fX2NvbmVudCcpO1xuY29uc3Qgb3ZlcmxheWZvcm1jbG91c2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheS1mb3JtX19jbG91c2UnKTtcbmJ0bmZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsgLy8g0JfQsNC/0YDQtdGJ0LDQtdC8INC/0LXRgNC10LfQsNCz0YDRg9C30LrRgyDRgdGA0LDQvdC40YbRiyDQv9GA0Lgg0L3QsNC20LDRgtC40Lgg0L3QsCDQutC90L7Qv9C60YNcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAodmFsaWRhdGVGb3JtKE15Zm9ybSkpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IE15Zm9ybS5lbGVtZW50cy5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgcGhvbmU6IE15Zm9ybS5lbGVtZW50cy5waG9uZS52YWx1ZSxcbiAgICAgICAgICAgIHN0cmVldDogTXlmb3JtLmVsZW1lbnRzLnN0cmVldC52YWx1ZSxcbiAgICAgICAgICAgIGNvbW1lbnQ6ICdjb21tZXRuJyxcbiAgICAgICAgICAgIGhvdXNlOiBNeWZvcm0uZWxlbWVudHMuaG91c2UudmFsdWUsXG4gICAgICAgICAgICBhcGFydGFtZW50OiBNeWZvcm0uZWxlbWVudHMuYXBhcnRhbWVudC52YWx1ZSxcbiAgICAgICAgICAgIGZsb29yOiBNeWZvcm0uZWxlbWVudHMuZmxvb3IudmFsdWUsXG4gICAgICAgICAgICB0bzogJ2tha3R1cy5aenp6QG1haWwucnUnXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgIGZvcm0uYXBwZW5kKGtleSwgZGF0YVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IHByb2Nlc3NSZXFDaGFuZ2U7XG5cbiAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1JlcUNoYW5nZSgpIHtcbiAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g0L7RiNC40LHQutCwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHhoci5vcGVuKCdQT1NUJywgXCJodHRwczovL3dlYmRldi1hcGkubG9mdHNjaG9vbC5jb20vc2VuZG1haWxcIik7XG4gICAgICAgIHhoci5zZW5kKGZvcm0pO1xuICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIG92ZXJsYXlmb3JtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWNvbnRlbnQuaW5uZXJUZXh0ID0gJ9Ch0L7QvtCx0YnQtdC90LjQtSDQvtGC0L/RgNCw0LLQuNC70YzQvdC+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWNvbnRlbnQuaW5uZXJUZXh0ID0gJ9Ce0YLQv9GA0LDQstC40YLRjCDQv9C40YHRjNC80L4g0L3QtSDRg9C00LDQu9C+0YHRjCwg0L/QvtCy0YLQvtGA0LjRgtC1INC30LDQv9GA0L7RgSDQv9C+0LfQttC1JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3ZlcmxheWZvcm1jbG91c2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgb3ZlcmxheWZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfY2xvc2VkJyk7XG4gICAgICAgICAgICAgICAgTXlmb3JtLnJlc2V0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdib2R5X2Nsb3NlZCcpO1xuICAgICAgICAgICAgb3ZlcmxheWZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcblxuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCA9PT0gb3ZlcmxheWZvcm0pIHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmxheWZvcm0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdib2R5X2Nsb3NlZCcpO1xuICAgICAgICAgICAgICAgICAgICBNeWZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG59KTtcblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcbiAgICBsZXQgdmFsaWQgPSB0cnVlO1xuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMubmFtZSkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5waG9uZSkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5zdHJlZXQpKSB7XG4gICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuaG91c2UpKSB7XG4gICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuYXBhcnRhbWVudCkpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5mbG9vcikpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWQ7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRmllbGQoZmllbGQpIHtcbiAgICBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBmaWVsZC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICByZXR1cm4gZmllbGQuY2hlY2tWYWxpZGl0eSgpO1xufSIsImNvbnN0IGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdhY2NvcmRlb24tbWVudV9faXRlbScpO1xuXG5mb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaXRlbS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICBjb25zdCBlbGVtZW50ID0gaXRlbVtpbmRleF07XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSAhPT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBpdGVtW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2FjY29yZGVvbi1tZW51X19jb250ZW50LS1hY3RpdmUtLWNvbG9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjY29yZGVvbi1tZW51X19jb250ZW50LS1hY3RpdmUtLWNvbG9yJykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWNjb3JkZW9uLW1lbnVfX2NvbnRlbnQtLWFjdGl2ZS0tY29sb3InKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWNjb3JkZW9uLW1lbnVfX2NvbnRlbnQtLWFjdGl2ZS0tY29sb3InKTtcbiAgICAgICAgfVxuICAgIH0pXG59XG4iLCJjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGFtYnVyZ2VyJyk7XG5jb25zdCBhcnJvd3Njcm93dyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhcnJvd3Njcm9sbCcpO1xuY29uc3QgY29tcHV0ZWQgPSBnZXRDb21wdXRlZFN0eWxlKG5hdnRhYmxldHMpO1xuY29uc3QgY29tcHV0ZWRzY3JvbGwgPSBnZXRDb21wdXRlZFN0eWxlKGFycm93c2Nyb2xsKTtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbmhhbWJ1cmdlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICBcbiAgICAvLyBjb25zb2xlLmxvZyhjb21wdXRlZC5kaXNwbGF5KTtcbiAgICBsZXQgZGlzcGxheW5vbmUgPSBjb21wdXRlZC5kaXNwbGF5O1xuICAgIGxldCBhcnJvd3Njcm9sbGJsb2NrID0gY29tcHV0ZWRzY3JvbGwuZGlzcGxheTtcbiAgICBcblxuICAgIGlmIChkaXNwbGF5bm9uZSA9PSAnbm9uZScpIHtcbiAgICAgICAgbmF2dGFibGV0cy5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC5hZGQoJ2JvZHlfY2xvc2VkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmF2dGFibGV0cy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2JvZHlfY2xvc2VkJyk7XG4gICAgfVxuXG4gICAgaWYgKCBhcnJvd3Njcm9sbGJsb2NrID09ICdibG9jaycpIHtcbiAgICAgICAgYXJyb3dzY3JvbGwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBhcnJvd3Njcm9sbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB9XG59KTsiLCJjb25zdCBzZWN0aW9ucyA9ICQoJy5zZWN0aW9uJyk7XHJcbmNvbnN0IGRpc3BsYXkgPSAkKCcubWFpbmNvbnRlbnQnKTtcclxubGV0IGluU2Nyb2xsID0gZmFsc2U7XHJcbmNvbnN0IG1kID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbmNvbnN0IGlzTW9iaWxlID0gbWQubW9iaWxlKCk7XHJcbmNvbnN0IGNoYW5nZUZpeGVkTWVudUFjdGl2ZUl0ZW0gPSAoKSA9PiB7XHJcbiAgICAkKCcuY29sdW1uX19pdGVtJylcclxuICAgICAgICAuZXEoc2VjdGlvbkVxKVxyXG4gICAgICAgIC5hZGRDbGFzcygnY29sdW1uX19kb3QtLWFjdGl2ZScpXHJcbiAgICAgICAgLnNpYmxpbmdzKClcclxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2NvbHVtbl9fZG90LS1hY3RpdmUnKTtcclxufVxyXG5cclxuY29uc3QgcGVyZm9ybVRyYW5zaXRpb24gPSBzZWN0aW9uRXEgPT4ge1xyXG4gICAgaWYgKGluU2Nyb2xsKSByZXR1cm47XHJcblxyXG4gICAgaW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgY29uc3QgdHJhbnNpdGlvbklzT3ZlciA9IDEwMDA7XHJcbiAgICBjb25zdCBtb3VzZUluZXJ0aW9uSXNPdmVyID0gMzAwO1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSBzZWN0aW9uRXEgKiAtMTAwO1xyXG4gICAgaWYgKGlzTmFOKHBvc2l0aW9uKSlcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfQv9C10YDQtdC00LvQuCDQvdC10LLQtdGA0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0LIgcGVyZm9ybVRyYW5zaXRpb24nKTtcclxuXHJcbiAgICBzZWN0aW9uc1xyXG4gICAgICAgIC5lcShzZWN0aW9uRXEpXHJcbiAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKVxyXG4gICAgICAgIC5zaWJsaW5ncygpXHJcbiAgICAgICAgLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICBkaXNwbGF5LmNzcyh7XHJcbiAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3Bvc2l0aW9ufSUpYFxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIGluU2Nyb2xsID0gZmFsc2U7XHJcbiAgICAgICAgY2hhbmdlRml4ZWRNZW51QWN0aXZlSXRlbSgpO1xyXG4gICAgfSwgdHJhbnNpdGlvbklzT3ZlciArIG1vdXNlSW5lcnRpb25Jc092ZXIpO1xyXG59O1xyXG5cclxuY29uc3Qgc2Nyb2xsVG9TZWN0aW9uID0gZGlyZWN0aW9uID0+IHtcclxuICAgIGNvbnN0IGFjdGl2ZVNlY3Rpb24gPSBzZWN0aW9ucy5maWx0ZXIoJy5hY3RpdmUnKTtcclxuICAgIGNvbnN0IG5leHRTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5uZXh0KCk7XHJcbiAgICBjb25zdCBwcmV2U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ucHJldigpO1xyXG5cclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXh0JyAmJiBuZXh0U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbihuZXh0U2VjdGlvbi5pbmRleCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSAncHJldicgJiYgcHJldlNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgcGVyZm9ybVRyYW5zaXRpb24ocHJldlNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKHdpbmRvdykub24oJ3doZWVsJywgZSA9PiB7XHJcbiAgICBjb25zdCBkZWx0YVkgPSBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xyXG5cclxuICAgIGlmIChkZWx0YVkgPiAwKSB7XHJcbiAgICAgICAgc2Nyb2xsVG9TZWN0aW9uKCduZXh0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlbHRhWSA8IDApIHtcclxuICAgICAgICBzY3JvbGxUb1NlY3Rpb24oJ3ByZXYnKTtcclxuICAgIH1cclxufSk7XHJcblxyXG4kKHdpbmRvdykub24oJ2tleWRvd24nLCBlID0+IHtcclxuICAgIGNvbnN0IHRhZ05hbWUgPSBlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCB1c2Vyc1R5cGluZ0luSW5wdXN0ID0gdGFnTmFtZSA9PT0gJ2lucHV0JyB8fCB0YWdOYW1lID09PSAndGV4dGFyZWEnXHJcbiAgICBpZiAodXNlcnNUeXBpbmdJbklucHVzdCkgcmV0dXJuO1xyXG4gICAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgICAgICBjYXNlIDM4OlxyXG4gICAgICAgICAgICBzY3JvbGxUb1NlY3Rpb24oJ3ByZXYnKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgc2Nyb2xsVG9TZWN0aW9uKCduZXh0Jyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbiQoJ1tkYXRhLXNjcm9sbC10b10nKS5vbignY2xpY2snLCBlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1zY3JvbGwtdG8nKTtcclxuXHJcbiAgICBwZXJmb3JtVHJhbnNpdGlvbih0YXJnZXQpO1xyXG59KTtcclxuXHJcbmlmIChpc01vYmlsZSkge1xyXG4gICAgJChcImJvZHlcIikuc3dpcGUoe1xyXG4gICAgICAgIHN3aXBlOiBmdW5jdGlvbiAoZXZlbnQsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbixcclxuICAgICAgICAgICAgZGlzdGFuY2UsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uLFxyXG4gICAgICAgICAgICBmaW5nZXJDb3VudCxcclxuICAgICAgICAgICAgZmluZ2VyRGF0YSkge1xyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxEaXJlY3Rpb24gPSBkaXJlY3Rpb24gPT09ICd1cCcgPyAnbmV4dCcgOiAncHJldic7XHJcblxyXG4gICAgICAgICAgICBzY3JvbGxUb1NlY3Rpb24oc2Nyb2xsRGlyZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSIsImNvbnN0IGJ1dHRvbk9wZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV0dG9uT3BlbicpO1xuY29uc3QgYm9keTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5jb25zdCByZXZpZXdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Jldmlld3NqcycpO1xuY29uc3Qgb3Blbk92ZXJsYXkgPSByZXZpZXdPdmVybGF5KCfQmtC+0L3RgdGC0LDQvdGC0LjQvSDQodC/0LjQu9Cx0LXRgNCzJywgJ9Cc0YvRgdC70Lgg0LLRgdC1INC+INC90LjRhSDQuCDQviDQvdC40YUsINC+INC90LjRhSDQuCDQviDQvdC40YUuINCd0LXQu9GM0LfRjyDRg9GB0YLQvtGP0YLRjCwg0L3QtdCy0L7Qt9C80L7QttC90L4g0LfQsNCx0YvRgtGMLi4uINCd0LjQutC+0LPQtNCwINC90LUg0LTRg9C80LDQuywg0YfRgtC+INCx0YPQu9C+0YfQutC4INC80L7Qs9GD0YIg0LHRi9GC0Ywg0YLQsNC60LjQvNC4INC80Y/Qs9C60LjQvNC4LCDQutC+0YLQu9C10YLQutCwINGC0LDQutC+0Lkg0YHQvtGH0L3QvtC5LCDQsCDRgdGL0YAg0YLQsNC60LjQvCDRgNCw0YHQv9C70LDQstC70LXQvdC90YvQvC4g0JzRi9GB0LvQuCDQstGB0LUg0L4g0L3QuNGFINC4INC+INC90LjRhSwg0L4g0L3QuNGFINC4INC+INC90LjRhS4g0J3QtdC70YzQt9GPINGD0YHRgtC+0Y/RgtGMLCDQvdC10LLQvtC30LzQvtC20L3QviDQt9Cw0LHRi9GC0YwuLi4g0J3QuNC60L7Qs9C00LAg0L3QtSDQtNGD0LzQsNC7LCDRh9GC0L4g0LHRg9C70L7Rh9C60Lgg0LzQvtCz0YPRgiDQsdGL0YLRjCDRgtCw0LrQuNC80Lgg0LzRj9Cz0LrQuNC80LgsINC60L7RgtC70LXRgtC60LAg0YLQsNC60L7QuSDRgdC+0YfQvdC+0LksINCwINGB0YvRgCDRgtCw0LrQuNC8INGA0LDRgdC/0LvQsNCy0LvQtdC90L3Ri9C8LicpO1xuXG4kKCcuYnV0dG9uT3BlbicpLm9uKCdjbGljaycsICgpID0+IHtcbiAgICByZXZpZXdzLmFwcGVuZENoaWxkKG9wZW5PdmVybGF5KTtcbiAgICBib2R5MS5jbGFzc0xpc3QuYWRkKCdib2R5X2Nsb3NlZCcpO1xufSlcblxuZnVuY3Rpb24gcmV2aWV3T3ZlcmxheSh1c2VybmFtZSwgY29udGVudCkge1xuICAgIGNvbnN0IG92ZXJsYXlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgb3ZlcmxheUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheScpO1xuICAgIG92ZXJsYXlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG5cbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5RWxlbWVudCkge1xuICAgICAgICAgICAgY2xvc2VFbGVtZW50LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBjb25haW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25haW5lckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3ZlcmxheV9fY29udGFpbmVyJyk7XG5cbiAgICBjb25zdCB1c2VybWFlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHVzZXJtYWVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXlfX3VzZXJuYW1lJyk7XG4gICAgdXNlcm1hZUVsZW1lbnQuaW5uZXJIVE1MID0gdXNlcm5hbWU7XG5cbiAgICBjb25zdCBjb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ292ZXJsYXktY29udGVudCcpO1xuICAgIGNvbnRlbnRFbGVtZW50LmlubmVySFRNTCA9IGNvbnRlbnQ7XG5cbiAgICBjb25zdCBjbG9zZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgY2xvc2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Nsb3NlJyk7XG4gICAgY2xvc2VFbGVtZW50LmhyZWYgPSBcIiNcIjtcbiAgICBjbG9zZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXZpZXdzLnJlbW92ZUNoaWxkKG9wZW5PdmVybGF5KTtcbiAgICAgICAgYm9keTEuY2xhc3NMaXN0LnJlbW92ZSgnYm9keV9jbG9zZWQnKTtcbiAgICB9KTtcblxuICAgIG92ZXJsYXlFbGVtZW50LmFwcGVuZENoaWxkKGNvbmFpbmVyRWxlbWVudCk7XG4gICAgY29uYWluZXJFbGVtZW50LmFwcGVuZENoaWxkKHVzZXJtYWVFbGVtZW50KTtcbiAgICBjb25haW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGVudEVsZW1lbnQpO1xuICAgIGNvbmFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZUVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIG92ZXJsYXlFbGVtZW50O1xufSIsIi8vIGNvbnN0IGxlZnRidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLXByZXYnKTtcbi8vIGNvbnN0IHJpZ2h0YnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1uZXh0Jyk7XG4vLyBjb25zdCBpdGVtbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51LXNsaWRlcl9fbGlzdCcpO1xuXG5cbi8vIHJpZ2h0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbi8vICAgICBsb29wKCdyaWdodGJ1dHRvbicsIGUpO1xuLy8gfSk7XG5cbi8vIGxlZnRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuLy8gICAgIGxvb3AoJ2xlZnRidXR0b24nLCBlKTtcbi8vIH0pO1xuXG4vLyBmdW5jdGlvbiBsb29wKGRpcmVjdGlvbiwgZSkge1xuLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcbi8vICAgICBpZiAoZGlyZWN0aW9uID09IHJpZ2h0YnV0dG9uKSB7XG4vLyAgICAgICAgIGl0ZW1saXN0LmFwcGVuZENoaWxkKGl0ZW1saXN0LmZpcnN0RWxlbWVudENoaWxkKTtcbi8vICAgICB9IGVsc2Uge1xuLy8gICAgICAgICBpdGVtbGlzdC5pbnNlcnRCZWZvcmUoaXRlbWxpc3QubGFzdEVsZW1lbnRDaGlsZCwgaXRlbWxpc3QuZmlyc3RFbGVtZW50Q2hpbGQpO1xuLy8gICAgIH1cbi8vIH1cblxuJChmdW5jdGlvbiAoKSB7XG5cbiAgICBsZXQgbW92ZVNsaWRlID0gZnVuY3Rpb24gKGl0ZW0sIHNsaWRlTnVtKSB7XG4gICAgICAgIHZhciBhY3RpdmVTbGlkZSA9IGl0ZW0uZmlsdGVyKCcuYWN0aXZlJyksXG4gICAgICAgICAgICByZXFJdGVtID0gaXRlbS5lcShzbGlkZU51bSksXG4gICAgICAgICAgICByZXFJbmRleCA9IHJlcUl0ZW0uaW5kZXgoKSxcbiAgICAgICAgICAgIGR1cmF0aW9uID0gNTAwO1xuXG4gICAgICAgIGlmIChyZXFJdGVtLmxlbmd0aCkge1xuICAgICAgICAgICAgaXRlbS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAnbGVmdCc6IC1yZXFJbmRleCAqIDEwMCArICclJ1xuICAgICAgICAgICAgfSwgZHVyYXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBhY3RpdmVTbGlkZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgcmVxSXRlbS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgJCgnLmJ1dHRvbi1zbGlkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgbGV0IGl0ZW0gPSAkKCcubWVudS1zbGlkZXJfX2NvbnRlbnQnKSxcbiAgICAgICAgICAgIGFjdGl2ZUl0ZW0gPSBpdGVtLmZpbHRlcignLmFjdGl2ZScpLFxuICAgICAgICAgICAgZXhpc3RlZEl0ZW0sIGVkZ2VJdGVtLCByZXFJdGVtO1xuXG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdidXR0b24tbmV4dCcpKSB7IC8vINCy0L/QtdGA0ZHQtFxuICAgICAgICAgICAgZXhpc3RlZEl0ZW0gPSBhY3RpdmVJdGVtLm5leHQoKTtcbiAgICAgICAgICAgIGVkZ2VJdGVtID0gaXRlbS5maXJzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2J1dHRvbi1wcmV2JykpIHsgLy8g0L3QsNC30LDQtFxuICAgICAgICAgICAgZXhpc3RlZEl0ZW0gPSBhY3RpdmVJdGVtLnByZXYoKTtcbiAgICAgICAgICAgIGVkZ2VJdGVtID0gaXRlbS5sYXN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXFJdGVtID0gZXhpc3RlZEl0ZW0ubGVuZ3RoID8gZXhpc3RlZEl0ZW0uaW5kZXgoKSA6IGVkZ2VJdGVtLmluZGV4KCk7XG5cbiAgICAgICAgbW92ZVNsaWRlKGl0ZW0sIHJlcUl0ZW0pO1xuICAgICAgICBpZiAoZXhpc3RlZEl0ZW0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBtb3ZlU2xpZGUoaXRlbSwgZXhpc3RlZEl0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW92ZVNsaWRlKGl0ZW0sIGVkZ2VJdGVtKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7IiwiY29uc3QgdmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJylbMF07XHJcbmNvbnN0IHBsYXlCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyX19zdGFydCcpO1xyXG5jb25zdCBwbGF5QnRuU3RhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVyX19idXR0b24tc3RhcnQnKTtcclxuY29uc3Qgc3ZnSWNvbiA9ICQoJy5pY29uLXBsYXknKTtcclxuY29uc3QgYnRuUGF1c2VkID0gJCgnLnBsYXllcl9fc3RhcnQnKTtcclxuY29uc3Qgdm9sdW1lQ29udHJvbCA9ICQoJy5wbGF5ZXJfX3BsYXlzb3VuZCcpO1xyXG5jb25zdCBwbGF5VGltZSA9ICQoJy5wbGF5ZXJfX2R1cmF0aXBuLWNvbXBsZXRlZCcpO1xyXG5cclxucGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh2aWQucGF1c2VkKSB7XHJcbiAgICAgICAgYnRuUGF1c2VkLmFkZENsYXNzKCdwYXVzZWQnKTtcclxuICAgICAgICBwbGF5QnRuU3RhcnQuY2xhc3NMaXN0LmFkZCgncGxheV9fYnV0dG9uLW5vbmUnKTtcclxuICAgICAgICBzdmdJY29uLmNzcyh7XHJcbiAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZpZC5wbGF5KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZpZC5wYXVzZSgpO1xyXG4gICAgICAgIGJ0blBhdXNlZC5yZW1vdmVDbGFzcygncGF1c2VkJyk7XHJcbiAgICAgICAgc3ZnSWNvbi5jc3Moe1xyXG4gICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0sIGZhbHNlKTtcclxuXHJcbnBsYXlCdG5TdGFydC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh2aWQucGF1c2VkKSB7XHJcbiAgICAgICAgcGxheUJ0blN0YXJ0LmNsYXNzTGlzdC5hZGQoJ3BhdXNlZCcpO1xyXG4gICAgICAgIHZpZC5wbGF5KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZpZC5wYXVzZSgpO1xyXG4gICAgfVxyXG59LCBmYWxzZSk7IiwieW1hcHMucmVhZHkoaW5pdCk7XHJcbmZ1bmN0aW9uIGluaXQoKXtcclxuICAgIHZhciBteU1hcCA9IG5ldyB5bWFwcy5NYXAoXCJtYXBcIiwge1xyXG4gICAgICAgIGNlbnRlcjogWzU5LjkyLCAzMC4yOF0sXHJcbiAgICAgICAgem9vbTogMTIsXHJcbiAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnXSxcclxuICAgICAgICBiZWhhdmlvcnM6IFsnZHJhZyddXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgTXlwbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFs1OS45NywgMzAuMzFdLCB7XHJcbiAgICAgICAgaGludENvbnRlbnQ6ICc8ZGl2IGNsYXNzPVwibWFwX19oaW50XCI+0YPQuy4g0JvQuNGC0LXRgNCw0YLQvtGA0L7Qsiwg0LQuMTk8L2Rpdj4nLFxyXG4gICAgICAgIGJhbGxvb25Db250ZW50OiBbXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibWFwX19iYWxvb25cIj4nLFxyXG4gICAgICAgICAgICAnQ9Cw0LzRi9C1INCy0LrRg9GB0L3Ri9C1INCx0YPRgNCz0LXRgNGLINGDINC90LDRgSEg0JfQsNGF0L7QtNC40YLQtSDRgSAxMDowMCDQtNC+IDIxOjAwINC/0L4g0LDQtNGA0LXRgdGDOiDRg9C7LiDQm9C40YLQtdGA0LDRgtC+0YDQvtCyLCDQtC4xOScsXHJcbiAgICAgICAgICAgICc8L2Rpdj4nXHJcbiAgICAgICAgXS5qb2luKCcnKVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9pY29ucy9tYXAtbWFya2VyLnN2ZycsXHJcbiAgICAgICAgaWNvbkltYWdlU2l6ZTogWzkyLCA2OV1cclxuICAgIH0pO1xyXG5cclxuICAgIG15TWFwLmdlb09iamVjdHMuYWRkKE15cGxhY2VtYXJrKTtcclxufSJdfQ==
